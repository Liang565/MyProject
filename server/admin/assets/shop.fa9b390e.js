import{f as j,n as F,g as q,r as p,o as K,h as z,j as s,i as u,w as n,u as e,F as G,t as H,l as C}from"./vendor.7d6628ed.js";import{a as J}from"./api.550efd51.js";import"./http.ad2693f8.js";import{C as L}from"./crud-api.9ad782f8.js";import"./crud.5c2610df.js";const P=s("div",{class:"mb-2 text-2xl"},"\u5546\u94FA\u7BA1\u7406",-1),Q={class:"mb-2"},R=C(" \u65B0\u589E\u5546\u94FA "),W={class:"w-full"},X=C("\u641C\u7D22"),Y={class:"my-5"},Z=C("\u4FEE\u6539"),h=C("\u5220\u9664"),de=j({setup(ee){const{remove:U,viss:r,editOk:D,addOk:B,fetch:x,data:w,query:ue,where:v,search:I,pagination:O,pageChange:S}=L("shops");let c=F("addShop");v.value={title:"",user:""};let a=F({title:"",user:"",description:"",images:"",address:"",phone:""});const M=()=>{a.value={title:"",user:"",description:"",images:"",address:"",phone:""}},$=()=>{r.value.add=!0};let m=F([]);const N=async()=>{const f=await J.user.find({limit:999});m.value=f.data.map(l=>({label:l.username,value:l._id}))},y=()=>{M(),console.log("cancel")};let g=F("");const V=f=>{g.value=f._id,r.value.edit=!0};return q(()=>{x(),N()}),(f,l)=>{const _=p("a-button"),d=p("a-input"),o=p("a-form-item"),k=p("a-select"),E=p("a-form"),i=p("a-table-column"),T=p("a-table"),A=p("a-modal");return K(),z(G,null,[s("div",null,[P,s("div",Q,[u(_,{onClick:$,type:"primary"},{default:n(()=>[R]),_:1})]),s("div",W,[u(E,{layout:"inline"},{default:n(()=>[u(o,{label:"\u5E97\u94FA\u540D\uFF1A",class:"w-52"},{default:n(()=>[u(d,{value:e(v).title,"onUpdate:value":l[0]||(l[0]=t=>e(v).title=t)},null,8,["value"])]),_:1}),u(o,{label:"\u6240\u5C5E\u7528\u6237\u540D",class:"w-44"},{default:n(()=>[u(k,{options:e(m),value:e(v).user,"onUpdate:value":l[1]||(l[1]=t=>e(v).user=t),allowClear:!0},null,8,["options","value"])]),_:1}),u(o,null,{default:n(()=>[u(_,{type:"primary",onClick:e(I)},{default:n(()=>[X]),_:1},8,["onClick"])]),_:1})]),_:1})]),s("div",Y,[u(T,{dataSource:e(w),rowKey:"title",pagination:e(O),onChange:e(S)},{default:n(()=>[u(i,{title:"\u5546\u94FA\u540D",dataIndex:"title",key:"title",class:"w-60"}),u(i,{title:"id",dataIndex:"_id",key:"_id"}),u(i,{title:"\u6240\u5C5E\u7528\u6237",dataIndex:"user",key:"user"},{default:n(({record:t})=>{var b;return[s("span",null,H((b=t.user)==null?void 0:b.username),1)]}),_:1}),u(i,{title:"\u5546\u94FA\u7B80\u4ECB",dataIndex:"description",key:"description"}),u(i,{title:"\u5546\u94FA\u56FE\u7247",dataIndex:"images",key:"images"}),u(i,{title:"\u5546\u94FA\u5730\u5740",dataIndex:"address",key:"address"}),u(i,{title:"\u5546\u94FA\u7535\u8BDD",dataIndex:"phone",key:"phone"}),u(i,{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"},{default:n(({record:t})=>[s("div",null,[u(_,{type:"link",onClick:b=>V(t)},{default:n(()=>[Z]),_:2},1032,["onClick"]),u(_,{type:"link",onClick:b=>e(U)(t,t.title)},{default:n(()=>[h]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["dataSource","pagination","onChange"])])]),s("div",null,[u(A,{visible:e(r).add,"onUpdate:visible":l[8]||(l[8]=t=>e(r).add=t),title:"\u65B0\u589E\u5546\u94FA",onOk:l[9]||(l[9]=t=>e(B)(e(a),e(c))),afterClose:y},{default:n(()=>[u(E,{model:e(a)},{default:n(()=>[u(o,{label:"\u5546\u5E97\u540D"},{default:n(()=>[u(d,{value:e(a).title,"onUpdate:value":l[2]||(l[2]=t=>e(a).title=t)},null,8,["value"])]),_:1}),u(o,{label:"\u6240\u5C5E\u7528\u6237\u540D"},{default:n(()=>[u(k,{options:e(m),value:e(a).user,"onUpdate:value":l[3]||(l[3]=t=>e(a).user=t)},null,8,["options","value"])]),_:1}),u(o,{label:"\u5546\u94FA\u7B80\u4ECB"},{default:n(()=>[u(d,{value:e(a).description,"onUpdate:value":l[4]||(l[4]=t=>e(a).description=t)},null,8,["value"])]),_:1}),u(o,{label:"\u5546\u94FA\u56FE\u7247"},{default:n(()=>[u(d,{value:e(a).images,"onUpdate:value":l[5]||(l[5]=t=>e(a).images=t)},null,8,["value"])]),_:1}),u(o,{label:"\u5546\u94FA\u5730\u5740"},{default:n(()=>[u(d,{value:e(a).address,"onUpdate:value":l[6]||(l[6]=t=>e(a).address=t)},null,8,["value"])]),_:1}),u(o,{label:"\u5546\u94FA\u7535\u8BDD"},{default:n(()=>[u(d,{value:e(a).phone,"onUpdate:value":l[7]||(l[7]=t=>e(a).phone=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),s("div",null,[u(A,{visible:e(r).edit,"onUpdate:visible":l[16]||(l[16]=t=>e(r).edit=t),title:"\u4FEE\u6539\u4FE1\u606F",afterClose:y,onOk:l[17]||(l[17]=t=>e(D)(e(g),e(a)))},{default:n(()=>[u(E,{model:e(a)},{default:n(()=>[u(o,{label:"\u5546\u5E97\u540D"},{default:n(()=>[u(d,{value:e(a).title,"onUpdate:value":l[10]||(l[10]=t=>e(a).title=t)},null,8,["value"])]),_:1}),u(o,{label:"\u6240\u5C5E\u7528\u6237\u540D"},{default:n(()=>[u(k,{options:e(m),value:e(a).user,"onUpdate:value":l[11]||(l[11]=t=>e(a).user=t)},null,8,["options","value"])]),_:1}),u(o,{label:"\u5546\u94FA\u7B80\u4ECB"},{default:n(()=>[u(d,{value:e(a).description,"onUpdate:value":l[12]||(l[12]=t=>e(a).description=t)},null,8,["value"])]),_:1}),u(o,{label:"\u5546\u94FA\u56FE\u7247"},{default:n(()=>[u(d,{value:e(a).images,"onUpdate:value":l[13]||(l[13]=t=>e(a).images=t)},null,8,["value"])]),_:1}),u(o,{label:"\u5546\u94FA\u5730\u5740"},{default:n(()=>[u(d,{value:e(a).address,"onUpdate:value":l[14]||(l[14]=t=>e(a).address=t)},null,8,["value"])]),_:1}),u(o,{label:"\u5546\u94FA\u7535\u8BDD"},{default:n(()=>[u(d,{value:e(a).phone,"onUpdate:value":l[15]||(l[15]=t=>e(a).phone=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}});export{de as default};
