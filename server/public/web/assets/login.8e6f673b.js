import{h as c}from"./http.ad2d7282.js";/* empty css              */import{d as b,u as f,r as h,b as u,c as B,e as x,f as r,g as o,w as l,T as y,h as s,x as w}from"./index.fcff6f00.js";const V={id:"building"},k=r("div",{class:"text-center pt-48 pb-10 text-4xl"},"\u767B\u5F55",-1),C={style:{margin:"16px"}},S=w(" \u63D0\u4EA4 "),U=b({__name:"login",setup(D){const i=f();let t=h({username:"",password:""});const m=async()=>{console.log("\u6267\u884CloginUser");const e=await c.post("auth/login",t.value);e&&(y.success("\u767B\u9646\u6210\u529F"),localStorage.setItem("token",e.token),setTimeout(()=>{i.push("/")},1e3)),p()},p=async()=>{const e=await c.get("auth/user");localStorage.setItem("userid",e._id),localStorage.setItem("username",e.username),localStorage.setItem("image",e.image),localStorage.setItem("role",e.role),console.log(e)};return(e,a)=>{const d=u("van-field"),_=u("van-cell-group"),g=u("van-button"),v=u("van-form");return B(),x("div",V,[k,r("div",null,[o(v,{onSubmit:m},{default:l(()=>[o(_,{inset:""},{default:l(()=>[o(d,{modelValue:s(t).username,"onUpdate:modelValue":a[0]||(a[0]=n=>s(t).username=n),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),o(d,{modelValue:s(t).password,"onUpdate:modelValue":a[1]||(a[1]=n=>s(t).password=n),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1}),r("div",C,[o(g,{round:"",block:"",type:"primary","native-type":"submit"},{default:l(()=>[S]),_:1})])]),_:1})])])}}});export{U as default};
