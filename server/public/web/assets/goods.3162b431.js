import{_ as c}from"./iconPark.f90d97e7.js";import{h as T}from"./http.d4512288.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{d as lt,u as ct,r as n,o as dt,b as d,c as _,e as b,f as t,g as e,w as m,t as a,h as o,x as p,T as i,F as rt,j as _t,k as D,i as $,s as R}from"./index.41ffedc4.js";import{_ as U}from"./myimage.5a8bb871.js";import{A as mt}from"./action-api.5a7e30e1.js";/* empty css              */const pt={class:"flex justify-evenly"},ht={class:"translate-y-1/4"},vt={class:"translate-y-1/4"},ft={class:"translate-y-1/4"},gt={class:"translate-y-1/4"},Ft={class:"mb-20"},yt={class:"relative top-1/2 -translate-y-1/2"},kt=["src"],Ct={class:"w-11/12 bg-blue-300 h-auto relative left-1/2 -translate-x-1/2 rounded-lg mt-10"},xt={class:"text-lg"},bt={class:"text-lg text-red-600"},Et=t("br",null,null,-1),Bt={class:"text-base text-gray-700"},Dt=t("span",{class:"text-black"},"\u7B80\u4ECB\uFF1A",-1),At={class:"m-5 h-5/6"},Nt={class:"flex justify-start"},wt={class:"text-lg text-red-600 translate-y-1/2"},Lt=t("span",{class:"text-sm"},"\uFFE5",-1),jt={class:"my-5"},zt={class:"border-2 border-rose-600 text-red-500"},St={class:"flex justify-between"},Wt=p(" \u8D2D\u4E70\u6570\u91CF "),It={key:0,class:"text-xs text-gray-600"},Ot={class:"flex mr-10"},Vt={class:"w-12 text-center"},Mt={class:"fixed bottom-10 left-1/2 -translate-x-1/2"},Tt=p("\u52A0\u5165\u8D2D\u7269\u8F66"),$t={class:"m-5 h-5/6"},Rt={class:"flex justify-start"},Ut={class:"text-lg text-red-600 translate-y-1/2"},Gt=t("span",{class:"text-sm"},"\uFFE5",-1),Ht={class:"my-5"},Jt={class:"border-2 border-rose-600 text-red-500"},Pt={class:"flex justify-between"},qt=p(" \u8D2D\u4E70\u6570\u91CF "),Kt={key:0,class:"text-xs text-gray-600"},Qt={class:"flex mr-10"},Xt={class:"w-12 text-center"},Yt={class:"fixed bottom-10 left-1/2 -translate-x-1/2"},Zt=p("\u7ACB\u5373\u8D2D\u4E70"),de=lt({__name:"goods",props:{id:String},setup(G){const F=G;let v=localStorage.getItem("token");const h=ct();let r=n(),A=n(),y=n(),N=n(),w=n(),E=n(),B=0,L=n("");const H=async()=>{const s=await T.get(`commoditys/${F.id}`);r.value=s,y.value=s.price,A.value=s.image,N.value=s.commodityIntroduce,w.value=s.shop,E.value=s.image,B=s.commodityNum,L.value=s.commodityName},J=()=>{console.log("\u70B9\u51FB\u641C\u7D22\u6761"),h.push("/search")},P=()=>{h.go(-1)},q=()=>{h.push("/")},K=()=>{v?h.push("/cart1"):i.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},Q=()=>{console.log("\u5206\u4EAB")},X=()=>{h.push(`/shop/${w.value}`)};let f=n(!1),u=n({user:localStorage.getItem("userid"),commodity:F.id,goodsNum:0});const j=()=>{u.value.goodsNum<=0?i({message:"\u6570\u91CF\u4F4E\u4E8E\u8303\u56F4~",position:"bottom"}):u.value.goodsNum--},z=()=>{B>u.value.goodsNum?u.value.goodsNum++:i({message:"\u6570\u91CF\u9AD8\u4E8E\u5E93\u5B58~",position:"bottom"})},Y=()=>{v?B<=0?i.fail("\u5E93\u5B58\u4E3A0~"):f.value=!0:i.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},Z=async()=>{u.value.goodsNum===0?i.fail("\u6570\u91CF\u4E3A0~"):(await T.post("shopping-cart/addCart",u.value),i.success("\u6DFB\u52A0\u6210\u529F~"))},S=()=>{u.value.goodsNum=0};let g=n(!1);const tt=()=>{v?g.value=!0:i.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")};let W=n([]);const et=()=>{u.value.goodsNum===0?i.fail("\u6570\u91CF\u4E3A0~"):(W.value.push({goodsNum:u.value.goodsNum,commodity:r.value._id}),h.push(`/settlement/${JSON.stringify({model:W.value,total:u.value.goodsNum*r.value.price,key:"goods"})}`))},{Collect:ot,getCollect:st}=mt();localStorage.getItem("userid");let k=n(!1);const I=async()=>{v?(ot(F.id).then(s=>{k.value=s}),k.value?i.success("\u6536\u85CF\u6210\u529F~"):i.success("\u53D6\u6D88\u6536\u85CF~")):i.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")};return dt(()=>{H(),v&&st(F.id).then(s=>{k.value=s})}),(s,C)=>{const ut=d("van-search"),nt=d("van-swipe-item"),it=d("van-swipe"),x=d("van-action-bar-icon"),O=d("van-action-bar-button"),V=d("van-button"),M=d("van-popup"),at=d("van-action-bar");return _(),b("div",null,[t("div",pt,[t("div",ht,[t("button",{onClick:P},[e(c,{type:"back",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])]),t("div",vt,[t("button",{onClick:q},[e(c,{type:"home",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])]),t("div",null,[t("button",{onClick:J},[e(ut,{shape:"round",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"})])]),t("div",ft,[t("button",{onClick:K},[e(c,{type:"shopping",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])]),t("div",gt,[t("button",{onClick:Q},[e(c,{type:"more",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])])]),t("div",Ft,[t("div",null,[e(it,{autoplay:3e3,"lazy-render":"",height:500},{default:m(()=>[(_(!0),b(rt,null,_t(o(A),l=>(_(),D(nt,{key:l},{default:m(()=>[t("div",yt,[t("img",{src:l.url},null,8,kt)])]),_:2},1024))),128))]),_:1})]),t("div",Ct,[t("div",xt,a(o(L)),1),t("div",bt,"\uFFE5"+a(o(y)),1),Et,t("div",Bt,[Dt,p(" "+a(o(N)),1)])])]),t("div",null,[e(at,null,{default:m(()=>[e(x,{icon:"chat-o",text:"\u5BA2\u670D"}),o(k)?(_(),D(x,{key:0,icon:"star",text:"\u5DF2\u6536\u85CF",color:"#ff5000",onClick:I})):(_(),D(x,{key:1,icon:"star-o",text:"\u6536\u85CF",onClick:I})),e(x,{icon:"shop-o",text:"\u5E97\u94FA",onClick:X}),e(O,{type:"warning",color:"rgb(147 197 253)",text:"\u52A0\u5165\u8D2D\u7269\u8F66",onClick:Y}),e(M,{show:o(f),"onUpdate:show":C[0]||(C[0]=l=>$(f)?f.value=l:f=l),position:"bottom",style:{height:"80%"},closeable:!0,"safe-area-inset-bottom":!0,onClose:S},{default:m(()=>[t("div",At,[t("div",Nt,[t("div",null,[e(U,{src:o(E),height:"60"},null,8,["src"])]),t("div",wt,[Lt,p(a(o(y)),1)])]),t("div",jt,[t("span",zt,a(o(r).commodityName),1)]),t("div",St,[t("div",null,[Wt,o(r).commodityNum>0?(_(),b("span",It,"\u6709\u8D27")):R("",!0)]),t("div",Ot,[t("div",{onClick:j},[e(c,{type:"reduce",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]),t("div",Vt,a(o(u).goodsNum),1),t("div",{onClick:z},[e(c,{type:"add",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])])]),t("div",Mt,[e(V,{type:"primary",class:"w-80",round:!0,onClick:Z},{default:m(()=>[Tt]),_:1})])])]),_:1},8,["show"]),e(O,{color:"rgb(134, 239, 172)",type:"danger",text:"\u7ACB\u5373\u8D2D\u4E70",onClick:tt}),e(M,{show:o(g),"onUpdate:show":C[1]||(C[1]=l=>$(g)?g.value=l:g=l),position:"bottom",style:{height:"80%"},closeable:!0,"safe-area-inset-bottom":!0,onClose:S},{default:m(()=>[t("div",$t,[t("div",Rt,[t("div",null,[e(U,{src:o(E),height:"60"},null,8,["src"])]),t("div",Ut,[Gt,p(a(o(y)),1)])]),t("div",Ht,[t("span",Jt,a(o(r).commodityName),1)]),t("div",Pt,[t("div",null,[qt,o(r).commodityNum>0?(_(),b("span",Kt,"\u6709\u8D27")):R("",!0)]),t("div",Qt,[t("div",{onClick:j},[e(c,{type:"reduce",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]),t("div",Xt,a(o(u).goodsNum),1),t("div",{onClick:z},[e(c,{type:"add",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])])]),t("div",Yt,[e(V,{type:"primary",class:"w-80",round:!0,onClick:et},{default:m(()=>[Zt]),_:1})])])]),_:1},8,["show"])]),_:1})])])}}});export{de as default};
