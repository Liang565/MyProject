/* empty css              *//* empty css              */import{h as o}from"./http.05edda3e.js";/* empty css              *//* empty css              */import{u as h,r as i,T as l,D as f}from"./index.cea2f3b9.js";const C=c=>{const s=h();let v=i(),u=i(),n=i({limit:0,page:1,where:i()});const d=async()=>{const a=await o.get(`/${c}`,{params:{query:n.value}});if(a.total==0)l.fail("\u65E0\u6570\u636E~"),v.value=[];else{const r=JSON.stringify(n.value);s.push({query:{query1:r}}),v.value=a.data,u.value=a.total}};return{fetch:d,search:async()=>{console.log(n),d()},data:v,query:n,goGoods:a=>{s.push(`/goods/${a._id}`)},total:u,totalSum:async a=>{let r=0;for(let t in a){const e=await o.put(`/${c}/${a[t]}`),g=await o.put(`commoditys/${e.commodity}`);r=r+e.goodsNum*g.price}return r},removeCart:(a,r)=>{let t=a.length;t===0?l.fail("\u60A8\u8FD8\u6CA1\u6709\u9009\u62E9\u5546\u54C1~"):f.confirm({title:`\u5DF2\u9009\u62E9${t}\u4E2A\u5546\u54C1`,message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",cancelButtonText:"\u6211\u518D\u60F3\u60F3"}).then(async()=>{for(let e in a)console.log(a[e]),await o.delete(`${c}/${a[e]}`);n.value.where={user:r},d(),l.success("\u5DF2\u5220\u9664~")}).catch(()=>{})}}};export{C};
