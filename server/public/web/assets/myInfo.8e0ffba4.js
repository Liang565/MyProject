import{d as $,r as p,o as L,b as y,c as a,e as c,f as e,s as v,g as l,h as d,T as b,k as C,F as M,j as P,w as _,i as F,t as h,x as T,D as R}from"./index.fcff6f00.js";/* empty css              */import{h as k}from"./http.ad2d7282.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{a as U}from"./index.esm.8d852e6d.js";import{_ as j}from"./iconPark.dc992ce0.js";const q={class:"w-90vw"},G={class:"flex justify-center items-center pt-5"},H={key:0},J={key:1},K=$({__name:"addressEdit",props:{type:String,addressObject:Object},emits:["end"],setup(E,{emit:f}){const t=E;let i=p({});const w=async n=>{console.log(n);const m=p({name:n.name,province:n.province,city:n.city,county:n.county,address:n.addressDetail,tel:n.tel,postalCode:n.areaCode,isDefault:n.isDefault});t.type=="add"?(console.log(m.value),await k.post("user-info",m.value),b.success("\u65B0\u589E\u6210\u529F~"),f("end",!1)):t.type=="edit"&&t.addressObject&&(await k.put(`user-info/${t.addressObject._id}`,m.value),b.success("\u4FEE\u6539\u6210\u529F~"),f("end",!1))};return L(()=>{t.type==="edit"&&t.addressObject&&(console.log(t.addressObject),i.value={name:t.addressObject.name,province:t.addressObject.province,city:t.addressObject.city,county:t.addressObject.county,addressDetail:t.addressObject.address,tel:t.addressObject.tel,postalCode:t.addressObject.postalCode,areaCode:t.addressObject.postalCode,isDefault:t.addressObject.isDefault})}),(n,m)=>{const o=y("van-address-edit");return a(),c("div",q,[e("div",G,[t.type=="add"?(a(),c("div",H,"\u65B0\u589E\u5730\u5740")):v("",!0),t.type=="edit"?(a(),c("div",J,"\u4FEE\u6539\u5730\u5740")):v("",!0)]),e("div",null,[l(o,{"address-info":d(i),"area-list":d(U),"show-postal":"","show-set-default":"","show-search-result":"","area-columns-placeholder":["\u8BF7\u9009\u62E9","\u8BF7\u9009\u62E9","\u8BF7\u9009\u62E9"],onSave:w},null,8,["address-info","area-list"])])])}}}),Q={class:"bg-gray-100 p-0 w-100vw h-100vh"},X={class:"flex justify-between items-center pt-2"},Y={class:"mr-5 ml-2 flex justify-between items-center"},Z=e("div",{class:"pl-3"},"\u6211\u7684\u6536\u8D27\u5730\u5740",-1),ee={class:"w-16 h-7"},te={key:1},se={class:"rounded flex justify-center pb-20"},oe={class:"w-full"},ne={class:"py-1"},ae={class:"flex justify-start items-center"},de={class:"custom-title"},ie={class:"text-lg"},ue={key:0},le=T("\u9ED8\u8BA4"),ce=["onClick"],re={class:"flex justify-between items-center"},_e={class:"flex items-center"},pe=["onClick"],ve=e("div",{class:"text-sm"},"\u9ED8\u8BA4\u5730\u5740",-1),fe=["onClick"],me=e("div",{class:"text-sm"},"\u5220\u9664",-1),he=[me],ye={class:"flex justify-between items-center pl-3 p-3 w-full fixed bottom-0 bg-white"},be=T(" \u6DFB\u52A0\u5730\u5740 "),ke={key:0,class:"h-80vh"},$e=$({__name:"myInfo",setup(E){let f=p([]);const t=async()=>{const u=await k.post("user-info/find");f.value=u,f.value.length===0&&b.fail("\u65E0\u6570\u636E~")};let i=p(!0);const w=()=>{i.value=!i.value};p({isDefault:!0});const n=async u=>{b.loading("~"),setTimeout(async()=>{await k.put(`user-info/${u}`,{isDefault:!0}),t()},1e3)},m=u=>{R.confirm({title:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u5730\u5740\u5417\uFF1F",cancelButtonText:"\u6211\u518D\u60F3\u60F3"}).then(async()=>{setTimeout(async()=>{await k.delete(`user-info/${u}`),t(),b.success("\u5DF2\u5220\u9664~")},1e3)}).catch(()=>{})};let o=p(!1);const A=()=>{o.value=!o.value,g.value="add"};let D=p({}),g=p();const z=u=>{o.value=!o.value,g.value="edit",D.value=u},I=()=>{x&&t()};let x=localStorage.getItem("token");return L(()=>{x&&t()}),(u,r)=>{const N=y("van-tag"),O=y("van-cell"),S=y("van-cell-group"),V=y("van-button"),W=y("van-popup");return a(),c("div",null,[e("div",Q,[e("div",X,[e("div",Y,[e("div",null,[e("button",{onClick:r[0]||(r[0]=s=>u.$router.go(-1))},[l(j,{type:"back",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})])])]),Z,e("div",ee,[e("button",{onClick:w},[d(i)?(a(),C(j,{key:0,type:"edit-two",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})):v("",!0),d(i)?v("",!0):(a(),c("span",te,"\u5B8C\u6210"))])])]),e("div",se,[e("div",oe,[(a(!0),c(M,null,P(d(f),s=>(a(),c("div",ne,[l(S,{inset:""},{default:_(()=>[l(O,null,{title:_(()=>[e("div",ae,[e("div",de,[e("span",ie,h(s.name),1),e("span",null,h(s.tel),1)]),s.isDefault?(a(),c("div",ue,[l(N,{round:"",type:"danger"},{default:_(()=>[le]),_:1})])):v("",!0)])]),label:_(()=>[e("div",null,h(s.province)+"/ "+h(s.city)+"/ "+h(s.county)+"/ "+h(s.address),1)]),"right-icon":_(()=>[e("button",{onClick:B=>z(s)},[d(i)?(a(),C(j,{key:0,type:"edit",theme:"outline",size:"20  ",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})):v("",!0)],8,ce)]),_:2},1024),d(i)?v("",!0):(a(),C(O,{key:0},{default:_(()=>[e("div",re,[e("div",_e,[e("div",null,[e("button",{onClick:B=>n(s._id)},[l(j,{type:"round",theme:"outline",size:"18",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})],8,pe)]),ve]),e("div",null,[e("button",{onClick:B=>m(s._id)},he,8,fe)])])]),_:2},1024))]),_:2},1024)]))),256))])]),e("div",ye,[l(V,{type:"primary",size:"large",icon:"plus",round:"",onClick:A},{default:_(()=>[be]),_:1})])]),e("div",null,[l(W,{round:"",closeable:!0,show:d(o),"onUpdate:show":r[2]||(r[2]=s=>F(o)?o.value=s:o=s),position:"bottom",onClose:r[3]||(r[3]=s=>I())},{default:_(()=>[d(o)?(a(),c("div",ke,[l(K,{type:d(g),addressObject:d(D),onEnd:r[1]||(r[1]=s=>{F(o)?o.value=s:o=s})},null,8,["type","addressObject"])])):v("",!0)]),_:1},8,["show"])])])}}});export{$e as default};
