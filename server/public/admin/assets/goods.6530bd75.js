import{f as W,g as v,P as X,h as Y,r as c,o as w,j as U,p as m,k as e,w as o,l as t,m as N,t as D,y as _,L as Z,Q as ee}from"./vendor.34bbf430.js";import{h as L}from"./http.ac208b77.js";import{C as te}from"./crud-api.73604cab.js";import{_ as le,a as A}from"./myimglist.46eb359f.js";import"./admin-store.bb77b52f.js";import"./user-store.80d0fbbe.js";import"./reactivity.esm-bundler.f180a2dc.js";import"./register-and-login.97fb9136.js";/* empty css                                                  */const ue={class:"mb-2 flex justify-start"},ae=_(" \u65B0\u589E\u5546\u54C1 "),oe={class:"ml-5"},ie=_("\u641C\u7D22"),ne={class:"mt-5 h-70vh overflow-y-auto"},de=_("\u67E5\u770B"),se=_("\u67E5\u770B"),me={key:0},re={key:1},pe=_("\u4FEE\u6539"),ve=_("\u5220\u9664"),Fe=W({setup(ce){const{remove:$,viss:C,editOk:M,addOk:V,fetch:R,data:j,query:fe,where:s,search:B,pagination:q,pageChange:T}=te("commoditys");let f=v(!0);v(!1),v("");const F=localStorage.getItem("role");let g=v([]);const G=async()=>{const i=await L.post(`/commoditys/Goods/${localStorage.userid}`);i.length===0?F==="admin"?N.info("\u5F53\u524D\u4E3A\u7BA1\u7406\u5458\u7528\u6237"):N.info("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA"):(g.value=i.map(u=>({label:u.title,value:u.id})),g.value[0].value&&(s.value.shop=g.value[0].value,a.value.shop=s.value.shop,B()))},K=()=>{a.value.shop=s.value.shop,B()};v("addShop"),s.value={commodityName:"",title:"",shop:""};let a=v({commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,price:0,shop:""});const P=()=>{a.value={commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,price:0,shop:a.value.shop}},Q=()=>{g.value.length===0?F==="admin"?N.info("\u5F53\u524D\u4E3A\u7BA1\u7406\u5458\u7528\u6237"):N.error("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA,\u4E0D\u80FD\u65B0\u589E\u5546\u54C1"):(C.value.add=!0,f.value=!f.value)};let E=v([]);const z=async()=>{const i=await L.get("commodity-class",{params:{query:{limit:999}}});E.value=i.data.map(u=>({label:u.title,value:u._id}))},I=(i,u)=>u.label.toLowerCase().indexOf(i.toLowerCase())>=0,x=()=>{P()};let O=v("");const H=i=>{a.value.image=i.image,a.value.commodityName=i.commodityName,a.value.price=i.price,a.value.commodityIntroduce=i.commodityIntroduce,a.value.title=i.title._id,a.value.parameter=i.parameter,a.value.commodityNum=i.commodityNum,O.value=i._id,C.value.edit=!0,f.value=!f.value};X(f,(i,u)=>{});const S=(i,u)=>{Z.info({title:`${u}`,content:ee("div",{},`${i}`),onOk(){}})};return Y(()=>{z(),G(),F=="admin"&&R()}),(i,u)=>{const y=c("a-button"),k=c("a-select"),n=c("a-form-item"),b=c("a-form"),d=c("a-input"),r=c("a-table-column"),J=c("a-table"),h=c("a-modal");return w(),U("div",null,[m("div",ue,[m("div",null,[e(y,{onClick:Q,type:"primary"},{default:o(()=>[ae]),_:1})]),m("div",oe,[e(b,{layout:"inline"},{default:o(()=>[e(n,{label:"\u5207\u6362\u5E97\u94FA",class:"w-44"},{default:o(()=>[e(k,{options:t(g),value:t(s).shop,"onUpdate:value":u[0]||(u[0]=l=>t(s).shop=l),onChange:K},null,8,["options","value"])]),_:1})]),_:1})]),m("div",null,[e(b,{layout:"inline"},{default:o(()=>[e(n,{label:"\u5546\u54C1\u540D\uFF1A",class:"w-52"},{default:o(()=>[e(d,{value:t(s).commodityName,"onUpdate:value":u[1]||(u[1]=l=>t(s).commodityName=l)},null,8,["value"])]),_:1}),e(n,{label:"\u6240\u5C5E\u5206\u7C7B",class:"w-44"},{default:o(()=>[e(k,{options:t(E),value:t(s).title,"onUpdate:value":u[2]||(u[2]=l=>t(s).title=l),allowClear:!0,showSearch:!0,"filter-Option":I},null,8,["options","value"])]),_:1}),e(n,null,{default:o(()=>[e(y,{type:"primary",onClick:t(B)},{default:o(()=>[ie]),_:1},8,["onClick"])]),_:1})]),_:1})])]),m("div",ne,[e(J,{dataSource:t(j),rowKey:"title",pagination:t(q),onChange:t(T)},{default:o(()=>[e(r,{title:"\u5546\u54C1\u540D",dataIndex:"commodityName",key:"commodityName",align:"center"}),e(r,{title:"\u5546\u54C1\u4ECB\u7ECD",dataIndex:"commodityIntroduce",key:"commodityIntroduce",align:"center"},{default:o(({record:l})=>[e(y,{type:"link",onClick:p=>S(l.commodityIntroduce,"\u5546\u54C1\u4ECB\u7ECD")},{default:o(()=>[de]),_:2},1032,["onClick"])]),_:1}),e(r,{title:"\u53C2\u6570",dataIndex:"parameter",key:"parameter",align:"center"},{default:o(({record:l})=>[e(y,{type:"link",onClick:p=>S(l.parameter,"\u53C2\u6570")},{default:o(()=>[se]),_:2},1032,["onClick"])]),_:1}),e(r,{align:"center",title:"\u6570\u91CF",dataIndex:"commodityNum",key:"commodityNum"}),e(r,{title:"\u4EF7\u683C",dataIndex:"price",key:"price",align:"center"}),e(r,{title:"\u5206\u7C7B",dataIndex:"title",key:"title",align:"center"},{default:o(({record:l})=>{var p;return[m("span",null,D((p=l.title)==null?void 0:p.title),1)]}),_:1}),e(r,{title:"\u6240\u5C5E\u5546\u94FA",dataIndex:"shop",key:"shop",align:"center"},{default:o(({record:l})=>{var p;return[m("span",null,D((p=l.shop)==null?void 0:p.title),1)]}),_:1}),e(r,{title:"\u56FE\u7247",dataIndex:"image",key:"image",align:"center"},{default:o(({record:l})=>[l.image.length==0?(w(),U("div",me,"\u7A7A")):(w(),U("div",re,[e(le,{URL:l.image},null,8,["URL"])]))]),_:1}),e(r,{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",align:"center"},{default:o(({record:l})=>[m("div",null,[e(y,{type:"link",onClick:p=>H(l)},{default:o(()=>[pe]),_:2},1032,["onClick"]),e(y,{type:"link",onClick:p=>t($)(l,l.commodityName)},{default:o(()=>[ve]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["dataSource","pagination","onChange"])]),m("div",null,[e(h,{visible:t(C).add,"onUpdate:visible":u[10]||(u[10]=l=>t(C).add=l),title:"\u65B0\u589E\u5546\u54C1",onOk:u[11]||(u[11]=l=>t(V)(t(a))),afterClose:x,centered:!0},{default:o(()=>[e(b,{model:t(a)},{default:o(()=>[e(n,{label:"\u5546\u54C1\u540D"},{default:o(()=>[e(d,{value:t(a).commodityName,"onUpdate:value":u[3]||(u[3]=l=>t(a).commodityName=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5206\u7C7B"},{default:o(()=>[e(k,{allowClear:!0,showSearch:!0,options:t(E),value:t(a).title,"onUpdate:value":u[4]||(u[4]=l=>t(a).title=l),"filter-Option":I},null,8,["options","value"])]),_:1}),e(n,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:o(()=>[e(d,{value:t(a).commodityIntroduce,"onUpdate:value":u[5]||(u[5]=l=>t(a).commodityIntroduce=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5546\u54C1\u56FE\u7247"},{default:o(()=>[e(A,{onOnSuccess:u[6]||(u[6]=l=>{t(a).image=l}),resetList:t(f)},null,8,["resetList"])]),_:1}),e(n,{label:"\u53C2\u6570"},{default:o(()=>[e(d,{value:t(a).parameter,"onUpdate:value":u[7]||(u[7]=l=>t(a).parameter=l)},null,8,["value"])]),_:1}),e(n,{label:"\u6570\u91CF"},{default:o(()=>[e(d,{value:t(a).commodityNum,"onUpdate:value":u[8]||(u[8]=l=>t(a).commodityNum=l)},null,8,["value"])]),_:1}),e(n,{label:"\u4EF7\u683C"},{default:o(()=>[e(d,{value:t(a).price,"onUpdate:value":u[9]||(u[9]=l=>t(a).price=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),m("div",null,[e(h,{visible:t(C).edit,"onUpdate:visible":u[19]||(u[19]=l=>t(C).edit=l),title:"\u4FEE\u6539\u5546\u54C1\u4FE1\u606F",onOk:u[20]||(u[20]=l=>t(M)(t(O),t(a))),afterClose:x,centered:!0},{default:o(()=>[e(b,{model:t(a)},{default:o(()=>[e(n,{label:"\u5546\u54C1\u540D"},{default:o(()=>[e(d,{value:t(a).commodityName,"onUpdate:value":u[12]||(u[12]=l=>t(a).commodityName=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5206\u7C7B"},{default:o(()=>[e(k,{allowClear:!0,showSearch:!0,options:t(E),value:t(a).title,"onUpdate:value":u[13]||(u[13]=l=>t(a).title=l),"filter-Option":I},null,8,["options","value"])]),_:1}),e(n,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:o(()=>[e(d,{value:t(a).commodityIntroduce,"onUpdate:value":u[14]||(u[14]=l=>t(a).commodityIntroduce=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5546\u54C1\u56FE\u7247"},{default:o(()=>[e(A,{imgList:t(a).image,resetList:t(f),onOnSuccess:u[15]||(u[15]=l=>{t(a).image=l})},null,8,["imgList","resetList"])]),_:1}),e(n,{label:"\u53C2\u6570"},{default:o(()=>[e(d,{value:t(a).parameter,"onUpdate:value":u[16]||(u[16]=l=>t(a).parameter=l)},null,8,["value"])]),_:1}),e(n,{label:"\u6570\u91CF"},{default:o(()=>[e(d,{value:t(a).commodityNum,"onUpdate:value":u[17]||(u[17]=l=>t(a).commodityNum=l)},null,8,["value"])]),_:1}),e(n,{label:"\u4EF7\u683C"},{default:o(()=>[e(d,{value:t(a).price,"onUpdate:value":u[18]||(u[18]=l=>t(a).price=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])])}}});export{Fe as default};
