import{d as P,p as f,g as Q,r as p,o as w,h as U,j as n,i as e,w as u,l as t,x as W,F as X,m as S,t as c,n as N}from"./vendor.70f74869.js";import{h}from"./http.c8672c53.js";import{C as Y}from"./crud-api.2cd90b34.js";import{_ as Z,a as D}from"./myimglist.97a3ac01.js";import"./admin-store.5d141a94.js";import"./register-and-login.87c94732.js";const ee=n("div",{class:"mb-2 text-2xl"},"\u5546\u54C1\u7BA1\u7406",-1),te={class:"mb-2 flex justify-start"},le=N(" \u65B0\u589E\u5546\u54C1 "),oe={class:"ml-5"},ae=N("\u641C\u7D22"),ue=["src"],ie={class:"mt-5"},ne={key:0},de={key:1},se=N("\u4FEE\u6539"),me=N("\u5220\u9664"),ge=P({setup(re){const{remove:A,viss:y,editOk:L,addOk:$,fetch:pe,data:M,query:ve,where:s,search:B,pagination:R,pageChange:V}=Y("commoditys");let _=f(!1),j=f(""),C=f([]);const T=async()=>{const i=await h.post(`/commoditys/Goods/${localStorage.userid}`);i.length===0?S.info("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA"):(C.value=i.map(o=>({label:o.title,value:o.id})),C.value[0].value&&(s.value.shop=C.value[0].value,a.value.shop=s.value.shop,B()))},q=()=>{a.value.shop=s.value.shop,B()};f("addShop"),s.value={commodityName:"",title:"",shop:""};let a=f({commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,shop:""});const G=()=>{a.value={commodityName:"",commodityIntroduce:"",image:a.value.image,title:"",parameter:[],commodityNum:0,shop:a.value.shop}},K=()=>{C.value.length===0?S.error("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA,\u4E0D\u80FD\u65B0\u589E\u5546\u54C1"):y.value.add=!0};let b=f([]);const z=async()=>{const i=await h.get("commodity-class",{params:{limit:999}});b.value=i.data.map(o=>({label:o.title,value:o._id}))},F=(i,o)=>o.label.toLowerCase().indexOf(i.toLowerCase())>=0,x=()=>{G(),console.log("cancel")};let O=f("");const H=i=>{console.log(i),a.value.image=i.image,a.value.commodityName=i.commodityName,a.value.commodityIntroduce=i.commodityIntroduce,a.value.title=i.title._id,a.value.parameter=i.parameter,a.value.commodityNum=i.commodityNum,O.value=i._id,y.value.edit=!0};return Q(()=>{z(),T()}),(i,o)=>{const g=p("a-button"),k=p("a-select"),d=p("a-form-item"),E=p("a-form"),m=p("a-input"),I=p("a-modal"),r=p("a-table-column"),J=p("a-table");return w(),U(X,null,[n("div",null,[ee,n("div",te,[n("div",null,[e(g,{onClick:K,type:"primary"},{default:u(()=>[le]),_:1})]),n("div",oe,[e(E,{layout:"inline"},{default:u(()=>[e(d,{label:"\u5207\u6362\u5E97\u94FA",class:"w-44"},{default:u(()=>[e(k,{options:t(C),value:t(s).shop,"onUpdate:value":o[0]||(o[0]=l=>t(s).shop=l),onChange:q},null,8,["options","value"])]),_:1})]),_:1})])]),n("div",null,[n("div",null,[e(E,{layout:"inline"},{default:u(()=>[e(d,{label:"\u5546\u54C1\u540D\uFF1A",class:"w-52"},{default:u(()=>[e(m,{value:t(s).commodityName,"onUpdate:value":o[1]||(o[1]=l=>t(s).commodityName=l)},null,8,["value"])]),_:1}),e(d,{label:"\u6240\u5C5E\u5206\u7C7B",class:"w-44"},{default:u(()=>[e(k,{options:t(b),value:t(s).title,"onUpdate:value":o[2]||(o[2]=l=>t(s).title=l),allowClear:!0,showSearch:!0,"filter-Option":F},null,8,["options","value"])]),_:1}),e(d,null,{default:u(()=>[e(g,{type:"primary",onClick:t(B)},{default:u(()=>[ae]),_:1},8,["onClick"])]),_:1})]),_:1})])]),e(I,{visible:t(_),"onUpdate:visible":o[3]||(o[3]=l=>W(_)?_.value=l:_=l),title:"Basic Modal",onOk:i.handleOk},{default:u(()=>[n("img",{src:t(j)},null,8,ue)]),_:1},8,["visible","onOk"]),n("div",ie,[e(J,{dataSource:t(M),rowKey:"title",pagination:t(R),onChange:t(V),scroll:{y:390}},{default:u(()=>[e(r,{title:"id",dataIndex:"_id",key:"_id",class:"w-40"}),e(r,{title:"\u5546\u54C1\u540D",dataIndex:"commodityName",key:"commodityName"}),e(r,{title:"\u5546\u54C1\u4ECB\u7ECD",dataIndex:"commodityIntroduce",key:"commodityIntroduce"}),e(r,{title:"\u53C2\u6570",dataIndex:"parameter",key:"parameter"},{default:u(({record:l})=>[n("span",null,c(l.parameter),1)]),_:1}),e(r,{title:"\u6570\u91CF",dataIndex:"commodityNum",key:"commodityNum"}),e(r,{title:"\u5206\u7C7B",dataIndex:"title",key:"title"},{default:u(({record:l})=>{var v;return[n("span",null,c((v=l.title)==null?void 0:v.title),1)]}),_:1}),e(r,{title:"\u6240\u5C5E\u5546\u94FA",dataIndex:"shop",key:"shop"},{default:u(({record:l})=>{var v;return[n("span",null,c((v=l.shop)==null?void 0:v.title),1)]}),_:1}),e(r,{title:"\u56FE\u7247",dataIndex:"image",key:"image"},{default:u(({record:l})=>[l.image.length==0?(w(),U("div",ne,"\u7A7A")):(w(),U("div",de,[e(Z,{URL:l.image},null,8,["URL"])]))]),_:1}),e(r,{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"},{default:u(({record:l})=>[n("div",null,[e(g,{type:"link",onClick:v=>H(l)},{default:u(()=>[se]),_:2},1032,["onClick"]),e(g,{type:"link",onClick:v=>t(A)(l,l.title)},{default:u(()=>[me]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["dataSource","pagination","onChange"])])]),n("div",null,[e(I,{visible:t(y).add,"onUpdate:visible":o[10]||(o[10]=l=>t(y).add=l),title:"\u65B0\u589E\u5546\u54C1",onOk:o[11]||(o[11]=l=>t($)(t(a))),afterClose:x},{default:u(()=>[n("div",null,c(t(a)),1),e(E,{model:t(a)},{default:u(()=>[e(d,{label:"\u5546\u54C1\u540D"},{default:u(()=>[e(m,{value:t(a).commodityName,"onUpdate:value":o[4]||(o[4]=l=>t(a).commodityName=l)},null,8,["value"])]),_:1}),e(d,{label:"\u5206\u7C7B"},{default:u(()=>[e(k,{allowClear:!0,showSearch:!0,options:t(b),value:t(a).title,"onUpdate:value":o[5]||(o[5]=l=>t(a).title=l),"filter-Option":F},null,8,["options","value"])]),_:1}),e(d,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:u(()=>[e(m,{value:t(a).commodityIntroduce,"onUpdate:value":o[6]||(o[6]=l=>t(a).commodityIntroduce=l)},null,8,["value"])]),_:1}),e(d,{label:"\u5546\u54C1\u56FE\u7247"},{default:u(()=>[e(D,{onOnSuccess:o[7]||(o[7]=l=>{t(a).image=l})})]),_:1}),e(d,{label:"\u53C2\u6570"},{default:u(()=>[e(m,{value:t(a).parameter,"onUpdate:value":o[8]||(o[8]=l=>t(a).parameter=l)},null,8,["value"])]),_:1}),e(d,{label:"\u6570\u91CF"},{default:u(()=>[e(m,{value:t(a).commodityNum,"onUpdate:value":o[9]||(o[9]=l=>t(a).commodityNum=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),n("div",null,[e(I,{visible:t(y).edit,"onUpdate:visible":o[18]||(o[18]=l=>t(y).edit=l),title:"\u4FEE\u6539\u5546\u54C1\u4FE1\u606F",onOk:o[19]||(o[19]=l=>t(L)(t(O),t(a))),afterClose:x},{default:u(()=>[n("div",null,c(t(a)),1),e(E,{model:t(a)},{default:u(()=>[e(d,{label:"\u5546\u54C1\u540D"},{default:u(()=>[e(m,{value:t(a).commodityName,"onUpdate:value":o[12]||(o[12]=l=>t(a).commodityName=l)},null,8,["value"])]),_:1}),e(d,{label:"\u5206\u7C7B"},{default:u(()=>[e(k,{allowClear:!0,showSearch:!0,options:t(b),value:t(a).title,"onUpdate:value":o[13]||(o[13]=l=>t(a).title=l),"filter-Option":F},null,8,["options","value"])]),_:1}),e(d,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:u(()=>[e(m,{value:t(a).commodityIntroduce,"onUpdate:value":o[14]||(o[14]=l=>t(a).commodityIntroduce=l)},null,8,["value"])]),_:1}),e(d,{label:"\u5546\u54C1\u56FE\u7247"},{default:u(()=>[e(D,{fileList1:t(a).image,onOnSuccess:o[15]||(o[15]=l=>{t(a).image=l})},null,8,["fileList1"])]),_:1}),e(d,{label:"\u53C2\u6570"},{default:u(()=>[e(m,{value:t(a).parameter,"onUpdate:value":o[16]||(o[16]=l=>t(a).parameter=l)},null,8,["value"])]),_:1}),e(d,{label:"\u6570\u91CF"},{default:u(()=>[e(m,{value:t(a).commodityNum,"onUpdate:value":o[17]||(o[17]=l=>t(a).commodityNum=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}});export{ge as default};
