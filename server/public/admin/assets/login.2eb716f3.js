import{h as d,T as v}from"./http.1936afbf.js";import{d as B,u as h,r as s,b,c as V,e as r,f as o,w as n,s as w}from"./user.cb0acf2c.js";import{V as x,U as u}from"./reactivity.esm-bundler.c1ee0d40.js";import"./vendor.ce4e530f.js";import"./http.fc6e7509.js";import"./api.9c38940f.js";import"./admin-store.26ef1a35.js";import"./crud-api.7293b100.js";import"./index.9d74d9f6.js";const y={class:"w-full h-100vh bg-gray-200"},C=r("div",{class:"text-center pt-48 pb-10 text-4xl"},"\u767B\u5F55",-1),S={style:{margin:"16px"}},k=w(" \u63D0\u4EA4 "),R=B({setup(D){const c=h();let t=x({username:"",password:""});const i=async()=>{console.log("\u6267\u884CloginUser");const e=await d.post("auth/login",t.value);e&&(v.success("\u767B\u9646\u6210\u529F"),localStorage.setItem("token",e.token),setTimeout(()=>{c.push("/")},1e3)),p()},p=async()=>{const e=await d.get("auth/user");localStorage.setItem("userid",e._id),localStorage.setItem("username",e.username),localStorage.setItem("image",e.image),localStorage.setItem("role",e.role),console.log(e)};return(e,a)=>{const m=s("van-field"),_=s("van-cell-group"),g=s("van-button"),f=s("van-form");return b(),V("div",y,[C,r("div",null,[o(f,{onSubmit:i},{default:n(()=>[o(_,{inset:""},{default:n(()=>[o(m,{modelValue:u(t).username,"onUpdate:modelValue":a[0]||(a[0]=l=>u(t).username=l),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),o(m,{modelValue:u(t).password,"onUpdate:modelValue":a[1]||(a[1]=l=>u(t).password=l),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1}),r("div",S,[o(g,{round:"",block:"",type:"primary","native-type":"submit"},{default:n(()=>[k]),_:1})])]),_:1})])])}}});export{R as default};
