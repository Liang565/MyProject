import{h as p}from"./http.fc6e7509.js";import{d as k,h as r,j as g,r as o,o as O,k as q,p as c,l as t,w as l,u,y as N,m as S}from"./vendor.ce4e530f.js";const V=c("div",{class:"text-2xl"},"\u5206\u7C7B",-1),D={class:""},E=N("\u641C\u7D22"),L={class:"mt-4"},I=k({setup($){let _=r(),n=r({limit:999,page:1,where:{parent:{$exists:!1}}});const i=async()=>{let a=await p.get("/commodity-class/",{params:{query:n.value}});_.value=a.data};let d=r([]);const f=async()=>{let a=await p.get("/commodity-class/",{params:{query:{limit:999}}});d.value=a.data.map(e=>({label:e.title,value:e._id}))},h=(a,e)=>e.label.toLowerCase().indexOf(a.toLowerCase())>=0;let s=r({_id:""});const v=()=>{s.value._id==""?S.warn("\u672A\u9009\u62E9"):typeof s.value._id=="undefined"?(n.value.where={parent:{$exists:!1}},i()):(delete n.value.where.parent,n.value.where=s.value,i())};return g(()=>{i(),f()}),(a,e)=>{const w=o("a-select"),m=o("a-form-item"),y=o("a-button"),C=o("a-form"),x=o("a-table-column"),b=o("a-table");return O(),q("div",null,[V,c("div",D,[t(C,{layout:"inline"},{default:l(()=>[t(m,{label:"\u641C\u7D22",class:"w-44"},{default:l(()=>[t(w,{options:u(d),value:u(s)._id,"onUpdate:value":e[0]||(e[0]=B=>u(s)._id=B),allowClear:!0,showSearch:!0,"filter-Option":h},null,8,["options","value"])]),_:1}),t(m,null,{default:l(()=>[t(y,{type:"primary",onClick:v},{default:l(()=>[E]),_:1})]),_:1})]),_:1})]),c("div",L,[t(b,{dataSource:u(_),rowKey:"_id",scroll:{y:400},class:"h-400"},{default:l(()=>[t(x,{title:"\u7C7B\u522B",dataIndex:"title",key:"title",class:"w-60"})]),_:1},8,["dataSource"])])])}}});export{I as default};
