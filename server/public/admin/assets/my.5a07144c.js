import"./user-store.80d0fbbe.js";import{T as l,A as X,h as z}from"./http.f71bceac.js";import{d as J,u as K,o as Q,r as a,b as E,c as D,e as o,f as e,w as t,H as u,G as A,F as W,h as Y}from"./user.d35c86f9.js";import{_ as Z}from"./loginDialog.3c058af5.js";import{q as c,V as s,a as b,X as U}from"./reactivity.esm-bundler.f180a2dc.js";import"./vendor.bebcfb65.js";import"./http.47838019.js";import"./api.85fdd14d.js";import"./admin-store.b6bbf792.js";import"./crud-api.bf7f3228.js";import"./index.50ffbeab.js";import"./function-call.15a0f271.js";import"./use-route.b821170e.js";const $={class:"bg-gray-400 h-100vh"},ee={class:"flex mx-5 justify-start items-center pt-5"},te={class:"border-2 w-24 h-24"},oe={class:"my-10"},ue={class:"flex justify-center pb-2"},se=u(" \u4FEE\u6539\u5934\u50CF "),le={key:1,class:"flex w-full justify-around"},ae=u("\u53D6\u6D88"),ne=u("\u786E\u8BA4"),ie={class:"ml-3"},ce=o("span",{class:"text-sm"}," \u7528\u6237\u540D:",-1),re=o("span",{class:"text-sm"},"\u8D26\u53F7id: ",-1),_e={class:"mt-8"},de=o("span",{class:"text-xs"},"\u5168\u90E8",-1),me={class:"mt-8"},ge=u(" \u5730\u5740\u7BA1\u7406 "),pe=u(" \u6211\u7684\u6536\u85CF "),ve=u("\u5E2E\u52A9"),fe=u("\u8054\u7CFB\u5BA2\u670D"),Fe=u("\u5173\u4E8E\u6211\u4EEC"),he={class:"flex justify-center pt-10 pb-20"},Ee={key:0},Be=u("\u9000\u51FA\u767B\u5F55"),Ce={key:1},De=u("\u767B\u5F55"),Te=J({setup(Ae){let d=c(!1);const B=K(),V=()=>{p?B.push("/my/order-index"):l.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},j=()=>{p?B.push("/myCollect"):l.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},L=()=>{p?B.push("/myInfo"):l.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},N=()=>{console.log("\u6267\u884ClogOut"),l.success("\u9000\u51FA\u767B\u5F55"),localStorage.removeItem("token"),localStorage.removeItem("userid"),localStorage.removeItem("username"),localStorage.removeItem("image"),localStorage.removeItem("role"),setTimeout(()=>{d.value=!0,m.value=!m.value,n.value="",y.value="",k.value=""},1e3)};let n=c();n.value=localStorage.getItem("image");let y=c();y.value=localStorage.getItem("username");let k=c();k.value=localStorage.getItem("userid");let g=c(!1);const O=()=>{p?(console.log("\u4FEE\u6539\u5934\u50CF"),g.value=!0):l.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")};let C=c(!0);const T=r=>{var i;r.file.status=="done"&&(n.value=(i=r.file.response)==null?void 0:i.url,l.success("\u4E0A\u4F20\u6210\u529F"),C.value=!1),r.file.status=="uploading"&&l.loading("\u4E0A\u4F20\u4E2D"),r.file.status=="error"&&l.fail("\u4E0A\u4F20\u5931\u8D25")},x=()=>{C.value=!0,n.value=localStorage.getItem("image")};let w=c({image:String});const M=async()=>{const r=localStorage.getItem("userid");w.value.image=n.value,await z.put(`/users/${r}`,w.value)&&(localStorage.setItem("image",n.value),l.success("\u4FEE\u6539\u6210\u529F")),x()},R=()=>{x()};let m=c(!1);const q=()=>{B.push("login")};let p=localStorage.getItem("token");return Q(()=>{p?m.value=!m.value:d.value=!0}),(r,i)=>{const I=a("van-image"),v=a("van-button"),G=a("a-upload"),H=a("van-popup"),_=a("van-cell"),f=a("van-grid-item"),P=a("van-grid"),S=a("van-cell-group"),F=a("van-icon");return E(),D(W,null,[o("div",$,[o("div",ee,[o("div",te,[e(I,{width:"92",height:"92",src:s(n),onClick:O},null,8,["src"]),o("div",null,[e(H,{show:s(g),"onUpdate:show":i[0]||(i[0]=h=>b(g)?g.value=h:g=h),closeable:"","close-icon":"close",onClose:x},{default:t(()=>[o("div",oe,[o("div",null,[e(I,{width:"400",src:s(n)},null,8,["src"])]),o("div",ue,[s(C)?(E(),Y(G,{key:0,action:s(X)+"/upload",onChange:T,"max-count":1},{default:t(()=>[e(v,{color:"linear-gradient(to right, #ff6034, #ee0a24)",class:"w-56"},{default:t(()=>[se]),_:1})]),_:1},8,["action"])):A("",!0),s(C)?A("",!0):(E(),D("div",le,[o("div",null,[e(v,{type:"warning",onClick:R},{default:t(()=>[ae]),_:1})]),o("div",null,[e(v,{type:"success",onClick:M},{default:t(()=>[ne]),_:1})])]))])])]),_:1},8,["show"])])]),o("div",ie,[o("div",null,[ce,u(" "+U(s(y)),1)]),o("div",null,[re,u(" "+U(s(k)),1)])])]),o("div",_e,[e(S,{inset:!0},{default:t(()=>[e(_,{title:"\u6211\u7684\u8BA2\u5355","is-link":"",onClick:V},{value:t(()=>[de]),_:1}),e(_,null,{default:t(()=>[e(P,{"column-num":5},{default:t(()=>[e(f,{icon:"pending-payment",text:"\u5F85\u4ED8\u6B3E"}),e(f,{icon:"send-gift-o",text:"\u5F85\u53D1\u8D27"}),e(f,{icon:"logistics",text:"\u5F85\u6536\u8D27"}),e(f,{icon:"records",text:"\u5F85\u8BC4\u4EF7"}),e(f,{icon:"after-sale",text:"\u552E\u540E/\u9000\u6B3E"})]),_:1})]),_:1})]),_:1})]),o("div",me,[e(S,{inset:""},{default:t(()=>[e(_,{onClick:L},{title:t(()=>[e(F,{name:"location-o"},{default:t(()=>[ge]),_:1})]),_:1}),e(_,{onClick:j},{title:t(()=>[e(F,{name:"star-o"},{default:t(()=>[pe]),_:1})]),_:1}),e(_,null,{title:t(()=>[e(F,{name:"question-o"},{default:t(()=>[ve]),_:1})]),_:1}),e(_,null,{title:t(()=>[e(F,{name:"service-o"},{default:t(()=>[fe]),_:1})]),_:1}),e(_,null,{title:t(()=>[e(F,{name:"friends-o"},{default:t(()=>[Fe]),_:1})]),_:1})]),_:1})]),o("div",he,[s(m)?(E(),D("div",Ee,[e(v,{type:"danger",class:"w-80",onClick:N},{default:t(()=>[Be]),_:1})])):A("",!0),s(m)?A("",!0):(E(),D("div",Ce,[e(v,{type:"primary",class:"w-80",onClick:q},{default:t(()=>[De]),_:1})]))])]),o("div",null,[e(Z,{showDialog:s(d),"onUpdate:showDialog":i[1]||(i[1]=h=>b(d)?d.value=h:d=h)},null,8,["showDialog"])])],64)}}});export{Te as default};
