import{h as m}from"./http.3d895303.js";import{f as k,g as r,h as B,r as o,o as O,j as q,p,k as a,w as s,l as i,y as N,m as S}from"./vendor.1e3ef9c3.js";const V={class:""},D=N("\u641C\u7D22"),E={class:"mt-4 h-70vh overflow-y-auto"},A=k({setup(L){let c=r(),l=r({limit:999,page:1,where:{parent:{$exists:!1}}});const u=async()=>{let e=await m.get("/commodity-class/",{params:{query:l.value}});c.value=e.data};let _=r([]);const f=async()=>{let e=await m.get("/commodity-class/",{params:{query:{limit:999}}});_.value=e.data.map(t=>({label:t.title,value:t._id}))},w=(e,t)=>t.label.toLowerCase().indexOf(e.toLowerCase())>=0;let n=r({_id:""});const h=()=>{let e=n.value._id;e==""?S.warn("\u672A\u9009\u62E9"):typeof e=="undefined"?(l.value.where={parent:{$exists:!1}},u()):(delete l.value.where.parent,l.value.where=n.value,u())};return B(()=>{u(),f()}),(e,t)=>{const v=o("a-select"),d=o("a-form-item"),y=o("a-button"),C=o("a-form"),b=o("a-table-column"),x=o("a-table");return O(),q("div",null,[p("div",V,[a(C,{layout:"inline"},{default:s(()=>[a(d,{label:"\u641C\u7D22",class:"w-44"},{default:s(()=>[a(v,{options:i(_),value:i(n)._id,"onUpdate:value":t[0]||(t[0]=g=>i(n)._id=g),allowClear:!0,showSearch:!0,"filter-Option":w},null,8,["options","value"])]),_:1}),a(d,null,{default:s(()=>[a(y,{type:"primary",onClick:h},{default:s(()=>[D]),_:1})]),_:1})]),_:1})]),p("div",E,[a(x,{dataSource:i(c),rowKey:"_id"},{default:s(()=>[a(b,{title:"\u7C7B\u522B",dataIndex:"title",key:"title",class:"w-60"})]),_:1},8,["dataSource"])])])}}});export{A as default};
