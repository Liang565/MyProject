import{d as z,h as r,G as J,j as P,r as c,o as E,k as N,p as s,l as e,w as u,u as o,n as Q,F as W,m as X,v as U,y,D as Y,H as Z}from"./vendor.d8b6d154.js";import{h as S}from"./http.dfe8b96f.js";import{C as ee}from"./crud-api.bfc83400.js";import{_ as te,a as le}from"./myimglist.50fbfb00.js";import"./admin-store.abd45c57.js";import"./user-store.e39d293f.js";import"./reactivity.esm-bundler.c1ee0d40.js";import"./register-and-login.aab1b8e3.js";const oe=s("div",{class:"mb-2 text-2xl"},"\u5546\u54C1\u7BA1\u7406",-1),ae=y("\u641C\u7D22"),ue=["src"],ie={class:"mt-5"},ne=y("\u67E5\u770B"),de=y("\u67E5\u770B"),se={key:0},me={key:1},re=y("\u4FEE\u6539"),ce=y("\u5220\u9664"),Ie=z({setup(pe){const{remove:D,viss:g,editOk:L,addOk:ve,fetch:$,data:A,query:_e,where:p,search:I,pagination:M,pageChange:V}=ee("commoditys");let f=r(!0),C=r(!1),R=r(""),k=r([]);const q=async()=>{const i=await S.post(`/commoditys/Goods/${localStorage.userid}`);i.length===0?X.info("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA"):(k.value=i.map(l=>({label:l.title,value:l.id})),k.value[0].value&&(p.value.shop=k.value[0].value,a.value.shop=p.value.shop,I()))};r("addShop"),p.value={commodityName:"",title:"",shop:""};let a=r({commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,price:0,shop:""});const G=()=>{a.value={commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,price:0,shop:a.value.shop}};let b=r([]);const T=async()=>{const i=await S.get("commodity-class",{params:{query:{limit:999}}});b.value=i.data.map(l=>({label:l.title,value:l._id}))},h=(i,l)=>l.label.toLowerCase().indexOf(i.toLowerCase())>=0,j=()=>{G(),console.log("cancel")};let w=r("");const H=i=>{a.value.image=i.image,a.value.commodityName=i.commodityName,a.value.price=i.price,a.value.commodityIntroduce=i.commodityIntroduce,a.value.title=i.title._id,a.value.parameter=i.parameter,a.value.commodityNum=i.commodityNum,w.value=i._id,g.value.edit=!0,f.value=!f.value};J(f,(i,l)=>{console.log("aaa\u4FA6\u542C\u5668")});const F=(i,l)=>{console.log(i),Y.info({title:`${l}`,content:Z("div",{},`${i}`),onOk(){console.log("ok")}})};return P(()=>{T(),q(),localStorage.getItem("role")=="admin"&&$()}),(i,l)=>{const v=c("a-input"),n=c("a-form-item"),x=c("a-select"),_=c("a-button"),B=c("a-form"),O=c("a-modal"),d=c("a-table-column"),K=c("a-table");return E(),N(W,null,[s("div",null,[oe,s("div",null,[s("div",null,[e(B,{layout:"inline"},{default:u(()=>[e(n,{label:"\u5546\u54C1\u540D\uFF1A",class:"w-52"},{default:u(()=>[e(v,{value:o(p).commodityName,"onUpdate:value":l[0]||(l[0]=t=>o(p).commodityName=t)},null,8,["value"])]),_:1}),e(n,{label:"\u6240\u5C5E\u5206\u7C7B",class:"w-44"},{default:u(()=>[e(x,{options:o(b),value:o(p).title,"onUpdate:value":l[1]||(l[1]=t=>o(p).title=t),allowClear:!0,showSearch:!0,"filter-Option":h},null,8,["options","value"])]),_:1}),e(n,null,{default:u(()=>[e(_,{type:"primary",onClick:o(I)},{default:u(()=>[ae]),_:1},8,["onClick"])]),_:1})]),_:1})])]),e(O,{visible:o(C),"onUpdate:visible":l[2]||(l[2]=t=>Q(C)?C.value=t:C=t),title:"Basic Modal",onOk:i.handleOk,centered:!0},{default:u(()=>[s("img",{src:o(R)},null,8,ue)]),_:1},8,["visible","onOk"]),s("div",ie,[e(K,{dataSource:o(A),rowKey:"title",pagination:o(M),onChange:o(V),scroll:{y:395}},{default:u(()=>[e(d,{title:"id",dataIndex:"_id",key:"_id",class:"w-40",align:"center"}),e(d,{align:"center",title:"\u5546\u54C1\u540D",dataIndex:"commodityName",key:"commodityName"}),e(d,{title:"\u5546\u54C1\u4ECB\u7ECD",dataIndex:"commodityIntroduce",key:"commodityIntroduce",align:"center"},{default:u(({record:t})=>[e(_,{type:"link",onClick:m=>F(t.commodityIntroduce,"\u5546\u54C1\u4ECB\u7ECD")},{default:u(()=>[ne]),_:2},1032,["onClick"])]),_:1}),e(d,{title:"\u53C2\u6570",dataIndex:"parameter",key:"parameter",align:"center"},{default:u(({record:t})=>[e(_,{type:"link",onClick:m=>F(t.parameter,"\u53C2\u6570")},{default:u(()=>[de]),_:2},1032,["onClick"])]),_:1}),e(d,{align:"center",title:"\u6570\u91CF",dataIndex:"commodityNum",key:"commodityNum"}),e(d,{title:"\u4EF7\u683C",dataIndex:"price",key:"price",align:"center"}),e(d,{title:"\u5206\u7C7B",dataIndex:"title",key:"title",align:"center"},{default:u(({record:t})=>{var m;return[s("span",null,U((m=t.title)==null?void 0:m.title),1)]}),_:1}),e(d,{title:"\u6240\u5C5E\u5546\u94FA",dataIndex:"shop",key:"shop",align:"center"},{default:u(({record:t})=>{var m;return[s("span",null,U((m=t.shop)==null?void 0:m.title),1)]}),_:1}),e(d,{title:"\u56FE\u7247",dataIndex:"image",key:"image",align:"center"},{default:u(({record:t})=>[t.image.length==0?(E(),N("div",se,"\u7A7A")):(E(),N("div",me,[e(te,{URL:t.image},null,8,["URL"])]))]),_:1}),e(d,{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",align:"center"},{default:u(({record:t})=>[s("div",null,[e(_,{type:"link",onClick:m=>H(t)},{default:u(()=>[re]),_:2},1032,["onClick"]),e(_,{type:"link",onClick:m=>o(D)(t,t.title)},{default:u(()=>[ce]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["dataSource","pagination","onChange"])])]),s("div",null,[e(O,{visible:o(g).edit,"onUpdate:visible":l[10]||(l[10]=t=>o(g).edit=t),title:"\u4FEE\u6539\u5546\u54C1\u4FE1\u606F",onOk:l[11]||(l[11]=t=>o(L)(o(w),o(a))),afterClose:j,centered:!0},{default:u(()=>[e(B,{model:o(a)},{default:u(()=>[e(n,{label:"\u5546\u54C1\u540D"},{default:u(()=>[e(v,{value:o(a).commodityName,"onUpdate:value":l[3]||(l[3]=t=>o(a).commodityName=t)},null,8,["value"])]),_:1}),e(n,{label:"\u5206\u7C7B"},{default:u(()=>[e(x,{allowClear:!0,showSearch:!0,options:o(b),value:o(a).title,"onUpdate:value":l[4]||(l[4]=t=>o(a).title=t),"filter-Option":h},null,8,["options","value"])]),_:1}),e(n,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:u(()=>[e(v,{value:o(a).commodityIntroduce,"onUpdate:value":l[5]||(l[5]=t=>o(a).commodityIntroduce=t)},null,8,["value"])]),_:1}),e(n,{label:"\u5546\u54C1\u56FE\u7247"},{default:u(()=>[e(le,{imgList:o(a).image,resetList:o(f),onOnSuccess:l[6]||(l[6]=t=>{o(a).image=t})},null,8,["imgList","resetList"])]),_:1}),e(n,{label:"\u53C2\u6570"},{default:u(()=>[e(v,{value:o(a).parameter,"onUpdate:value":l[7]||(l[7]=t=>o(a).parameter=t)},null,8,["value"])]),_:1}),e(n,{label:"\u6570\u91CF"},{default:u(()=>[e(v,{value:o(a).commodityNum,"onUpdate:value":l[8]||(l[8]=t=>o(a).commodityNum=t)},null,8,["value"])]),_:1}),e(n,{label:"\u4EF7\u683C"},{default:u(()=>[e(v,{value:o(a).price,"onUpdate:value":l[9]||(l[9]=t=>o(a).price=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}});export{Ie as default};
