import{_ as z}from"./icon.4488182b.js";import{_ as q}from"./upload.d8152770.js";import{d as M,g as h,h as R,r as d,o as s,j as m,k as t,w as o,F as k,q as C,l as i,S as x,p as r,t as U,x as v,c as b,T as H,n as J,V as P,y as F}from"./vendor.21c9141e.js";import"./register-and-login.ff801dd2.js";import"./admin-store.0a078265.js";import"./http.72fb258c.js";/* empty css                                               */const Q={class:"price"},W={key:0},X=F(" \u6DFB\u52A0\u5546\u54C1 "),Y=F(" \u6DFB\u52A0\u56FE\u7247\u548C\u8FDE\u63A5 "),Z={class:"mb-3"},ee={class:"mt-3"},te=F(" \u5220\u9664 "),ne={class:"mb-3"},oe={class:"mt-3"},ue=F(" \u5220\u9664 "),le=F(" \u79FB\u9664\u7EC4\u4EF6"),pe=M({props:{option:{type:Object,default:()=>({})},content:{type:Object,default:()=>({})},index:{type:String,default:""},goods:{type:Object,default:()=>[]}},emits:["removeComponent"],setup(l,{emit:D}){const n=l;let B=h("1"),p=h(!0),f=h(!0),_=h();const G=()=>{if(console.log(n.goods),f.value=!1,(!n.content.type||n.content.type==="")&&(n.content.type="goods"),!n.content.menu){n.content.menu=[],n.content.menu.push({});return}n.content.menu.push({})},S=()=>{if(p.value=!1,(!n.content.type||n.content.type==="")&&(n.content.type="image"),!n.content.menu){n.content.menu=[],n.content.menu.push({});return}n.content.menu.push({})},A=a=>{n.content.menu.splice(n.content.menu.indexOf(a),1),n.content.menu.length===0&&(p.value=!0,f.value=!0,n.content.type="")},I=()=>{D("removeComponent")};let N=h(!1);const j=(a,u)=>u.label.toLowerCase().indexOf(a.toLowerCase())>=0;n.goods!==[]&&(_.value=n.goods.map(a=>{var u;return{label:a.commodityName,value:a._id,Img:(u=a.image[0])==null?void 0:u.url,price:a.price}}));const K=a=>{console.log(a);for(let u in _.value)_.value[u].value===a.id&&(a.title=_.value[u].label,a.image=_.value[u].Img,a.price=_.value[u].price)};return R(()=>{N.value=!0,n.content.type?n.content.type==="goods"?(p.value=!0,f.value=!1):(p.value=!1,f.value=!0):(p.value=!0,f.value=!0)}),(a,u)=>{const V=d("van-image"),g=d("a-button"),$=d("a-select"),y=d("a-form-item"),L=d("a-input"),w=d("a-form"),E=d("a-tab-pane"),O=d("van-stepper"),T=d("a-tabs");return s(),m("div",null,[t(i(H),{"column-num":l.option.column,gutter:l.option.gutter},{default:o(()=>[!l.content.menu||l.content.menu.length==0?(s(),m(k,{key:0},C(8,e=>t(i(x),{text:"\u6587\u5B57"},{default:o(()=>[r("div",null,[t(z,{type:"home",theme:"outline"}),r("div",null,U(e)+"\u5185\u5BB9\u4E3A\u7A7A",1)])]),_:2},1024)),64)):v("",!0),i(p)?(s(!0),m(k,{key:1},C(l.content.menu,e=>(s(),b(i(x),{icon:"photo-o"},{default:o(()=>[t(V,{src:e.image,fit:"contain"},null,8,["src"]),r("div",Q,[r("div",null,U(e.title),1),r("div",null,"\uFFE5"+U(e.price),1)])]),_:2},1024))),256)):v("",!0),i(f)?(s(!0),m(k,{key:2},C(l.content.menu,e=>(s(),b(i(x),{icon:"photo-o"},{default:o(()=>[r("div",null,[t(V,{src:e.image,fit:"contain"},null,8,["src"])])]),_:2},1024))),256)):v("",!0)]),_:1},8,["column-num","gutter"]),r("div",null,[(s(),b(P,{to:"#option"},[l.index==l.option.index?(s(),m("div",W,[t(T,{activeKey:i(B),"onUpdate:activeKey":u[2]||(u[2]=e=>J(B)?B.value=e:B=e)},{default:o(()=>[t(E,{key:"1",tab:"\u8BBE\u7F6E\u5185\u5BB9"},{default:o(()=>[i(p)?(s(),b(g,{key:0,type:"link",onClick:G},{default:o(()=>[X]),_:1})):v("",!0),i(f)?(s(),b(g,{key:1,type:"link",onClick:S},{default:o(()=>[Y]),_:1})):v("",!0),t(w,null,{default:o(()=>[i(p)?(s(!0),m(k,{key:0},C(l.content.menu,e=>(s(),m("div",Z,[t(y,{label:"\u9009\u62E9\u5546\u54C1"},{default:o(()=>[t($,{value:e.id,"onUpdate:value":c=>e.id=c,allowClear:!0,showSearch:!0,options:i(_),"filter-Option":j,onChange:c=>K(e)},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1024),r("div",ee,[t(g,{type:"primary",size:"small",onClick:c=>A(e)},{default:o(()=>[te]),_:2},1032,["onClick"])])]))),256)):v("",!0),i(f)?(s(!0),m(k,{key:1},C(l.content.menu,e=>(s(),m("div",ne,[t(y,{label:"\u4E0A\u4F20\u56FE\u7247"},{default:o(()=>[t(q,{imageUrl:e.image,"onUpdate:imageUrl":c=>e.image=c,onOnSuccess:c=>{e.image=c}},null,8,["imageUrl","onUpdate:imageUrl","onOnSuccess"])]),_:2},1024),t(y,{label:"\u6DFB\u52A0\u8FDE\u63A5"},{default:o(()=>[t(L,{value:e.url,"onUpdate:value":c=>e.url=c},null,8,["value","onUpdate:value"])]),_:2},1024),r("div",oe,[t(g,{type:"primary",size:"small",onClick:c=>A(e)},{default:o(()=>[ue]),_:2},1032,["onClick"])])]))),256)):v("",!0)]),_:1})]),_:1}),t(E,{key:"2",tab:"\u8BBE\u7F6E\u6837\u5F0F","force-render":""},{default:o(()=>[r("div",null,[t(w,null,{default:o(()=>[t(y,{label:"\u5217\u6570"},{default:o(()=>[t(O,{modelValue:l.option.column,"onUpdate:modelValue":u[0]||(u[0]=e=>l.option.column=e),step:"1",min:"1",max:"8"},null,8,["modelValue"])]),_:1}),t(y,{label:"\u95F4\u9694"},{default:o(()=>[t(O,{modelValue:l.option.gutter,"onUpdate:modelValue":u[1]||(u[1]=e=>l.option.gutter=e),step:"1",min:"1",max:"100"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),t(E,{key:"3",tab:"\u7F16\u8F91"},{default:o(()=>[t(g,{type:"link",onClick:I},{default:o(()=>[le]),_:1})]),_:1})]),_:1},8,["activeKey"])])):v("",!0)]))])])}}});export{pe as default};
