import"./user-store.80d0fbbe.js";import{a as X,h as z}from"./http.2cf225b3.js";import{d as J,u as K,o as Q,r as n,b as E,c as w,e as o,f as e,w as t,G as D,F as W,h as Y,H as l}from"./user.0f0244cd.js";import{_ as Z}from"./loginDialog.db630545.js";import{q as i,V as s,a as k,X as U}from"./reactivity.esm-bundler.f180a2dc.js";import{T as c}from"./function-call.b3f16382.js";import"./vendor.1e3ef9c3.js";import"./http.3d895303.js";import"./api.e2fff66e.js";import"./admin-store.fe4adc91.js";import"./crud-api.b919ecb7.js";import"./index.016760bd.js";import"./function-call.481ffa2f.js";import"./use-route.2456c025.js";const $={class:"bg-gray-200 h-100vh"},ee={class:"flex mx-5 justify-start items-center pt-5"},te={class:"border-2 w-24 h-24"},oe={class:"my-10"},se={class:"flex justify-center pb-2"},ue=l(" \u4FEE\u6539\u5934\u50CF "),le={key:1,class:"flex w-full justify-around"},ae=l("\u53D6\u6D88"),ne=l("\u786E\u8BA4"),ie={class:"ml-3"},ce={class:"flex items-center"},re=o("div",{class:"text-sm"},"\u7528\u6237\u540D:",-1),de={class:"w-40 overflow-hidden text-ellipsis whitespace-nowrap"},_e={class:"flex items-center"},me=o("div",{class:"text-sm"},"\u8D26\u53F7id:",-1),pe={class:"w-40 overflow-hidden text-ellipsis whitespace-nowrap"},ve={class:"mt-8"},ge=o("span",{class:"text-xs"},"\u5168\u90E8",-1),fe={class:"mt-8"},he=l(" \u5730\u5740\u7BA1\u7406 "),Fe=l(" \u6211\u7684\u6536\u85CF "),Ee=l("\u5E2E\u52A9"),Be=l("\u8054\u7CFB\u5BA2\u670D"),Ce=l("\u5173\u4E8E\u6211\u4EEC"),we={class:"flex justify-center pt-10 pb-20"},De={key:0},xe=l("\u9000\u51FA\u767B\u5F55"),ye={key:1},Ae=l("\u767B\u5F55"),He=J({setup(ke){let a=i(!1);i("");const B=K(),V=()=>{g?B.push({path:"/my/order-index",query:{state:"\u5168\u90E8"}}):c.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},j=()=>{g?B.push("/myCollect"):c.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},L=()=>{g?B.push("/myInfo"):c.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")},N=()=>{console.log("\u6267\u884ClogOut"),c.success("\u9000\u51FA\u767B\u5F55"),localStorage.removeItem("token"),localStorage.removeItem("userid"),localStorage.removeItem("username"),localStorage.removeItem("image"),localStorage.removeItem("role"),setTimeout(()=>{a.value=!0,p.value=!p.value,r.value="",x.value="",y.value=""},1e3)};let r=i();r.value=localStorage.getItem("image");let x=i();x.value=localStorage.getItem("username");let y=i();y.value=localStorage.getItem("userid");let v=i(!1);const O=()=>{g?(console.log("\u4FEE\u6539\u5934\u50CF"),v.value=!0):c.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")};let C=i(!0);const T=_=>{var u;_.file.status=="done"&&(r.value=(u=_.file.response)==null?void 0:u.url,c.success("\u4E0A\u4F20\u6210\u529F"),C.value=!1),_.file.status=="uploading"&&c.loading("\u4E0A\u4F20\u4E2D"),_.file.status=="error"&&c.fail("\u4E0A\u4F20\u5931\u8D25")},A=()=>{C.value=!0,r.value=localStorage.getItem("image")};let I=i({image:String});const q=async()=>{const _=localStorage.getItem("userid");I.value.image=r.value,await z.put(`/users/${_}`,I.value)&&(localStorage.setItem("image",r.value),c.success("\u4FEE\u6539\u6210\u529F")),A()},M=()=>{A()};let p=i(!1);const R=()=>{B.push("login")};let g=localStorage.getItem("token");return Q(()=>{g?p.value=!p.value:a.value=!0}),(_,u)=>{const S=n("van-image"),f=n("van-button"),G=n("a-upload"),H=n("van-popup"),m=n("van-cell"),h=n("van-grid-item"),P=n("van-grid"),b=n("van-cell-group"),F=n("van-icon");return E(),w(W,null,[o("div",$,[o("div",ee,[o("div",te,[e(S,{width:"92",height:"92",src:s(r),onClick:O},null,8,["src"]),o("div",null,[e(H,{show:s(v),"onUpdate:show":u[0]||(u[0]=d=>k(v)?v.value=d:v=d),closeable:"","close-icon":"close",onClose:A},{default:t(()=>[o("div",oe,[o("div",null,[e(S,{width:"400",src:s(r)},null,8,["src"])]),o("div",se,[s(C)?(E(),Y(G,{key:0,action:s(X)+"/upload",onChange:T,"max-count":1},{default:t(()=>[e(f,{color:"linear-gradient(to right, #ff6034, #ee0a24)",class:"w-56"},{default:t(()=>[ue]),_:1})]),_:1},8,["action"])):D("",!0),s(C)?D("",!0):(E(),w("div",le,[o("div",null,[e(f,{type:"warning",onClick:M},{default:t(()=>[ae]),_:1})]),o("div",null,[e(f,{type:"success",onClick:q},{default:t(()=>[ne]),_:1})])]))])])]),_:1},8,["show"])])]),o("div",ie,[o("div",ce,[re,o("div",de,U(s(x)),1)]),o("div",_e,[me,o("div",pe,U(s(y)),1)])])]),o("div",ve,[e(b,{inset:!0},{default:t(()=>[e(m,{title:"\u6211\u7684\u8BA2\u5355","is-link":"",onClick:V},{value:t(()=>[ge]),_:1}),e(m,null,{default:t(()=>[e(P,{"column-num":5},{default:t(()=>[e(h,{icon:"pending-payment",text:"\u5F85\u4ED8\u6B3E"}),e(h,{icon:"send-gift-o",text:"\u5F85\u53D1\u8D27"}),e(h,{icon:"logistics",text:"\u5F85\u6536\u8D27"}),e(h,{icon:"records",text:"\u5F85\u8BC4\u4EF7"}),e(h,{icon:"after-sale",text:"\u552E\u540E/\u9000\u6B3E"})]),_:1})]),_:1})]),_:1})]),o("div",fe,[e(b,{inset:""},{default:t(()=>[e(m,{onClick:L},{title:t(()=>[e(F,{name:"location-o"},{default:t(()=>[he]),_:1})]),_:1}),e(m,{onClick:j},{title:t(()=>[e(F,{name:"star-o"},{default:t(()=>[Fe]),_:1})]),_:1}),e(m,null,{title:t(()=>[e(F,{name:"question-o"},{default:t(()=>[Ee]),_:1})]),_:1}),e(m,null,{title:t(()=>[e(F,{name:"service-o"},{default:t(()=>[Be]),_:1})]),_:1}),e(m,null,{title:t(()=>[e(F,{name:"friends-o"},{default:t(()=>[Ce]),_:1})]),_:1})]),_:1})]),o("div",we,[s(p)?(E(),w("div",De,[e(f,{type:"danger",class:"w-80",onClick:N},{default:t(()=>[xe]),_:1})])):D("",!0),s(p)?D("",!0):(E(),w("div",ye,[e(f,{type:"primary",class:"w-80",onClick:R},{default:t(()=>[Ae]),_:1})]))])]),o("div",null,[e(Z,{showDialog:s(a),"onUpdate:showDialog":u[1]||(u[1]=d=>k(a)?a.value=d:a=d),onGetShow:u[2]||(u[2]=d=>{k(a)?a.value=d:a=d})},null,8,["showDialog"])])],64)}}});export{He as default};
