import"./user-store.e39d293f.js";import{T as g,C as z,h as H}from"./http.1936afbf.js";import{d as L,u as N,b as p,c as D,f as e,w as t,e as o,o as J,r as a,s as u,G as w,F as K,h as Q}from"./user.cb0acf2c.js";import{a as A,U as s,V as i,X as j}from"./reactivity.esm-bundler.c1ee0d40.js";import{D as W}from"./function-call.aeee70b6.js";import"./vendor.ce4e530f.js";import"./http.fc6e7509.js";import"./api.9c38940f.js";import"./admin-store.26ef1a35.js";import"./crud-api.7293b100.js";import"./index.9d74d9f6.js";const Y=o("div",{class:"text-center"},"\u5F53\u524D\u4E3A\u6E38\u5BA2",-1),Z=o("div",{class:"text-center"},"\u8BF7\u767B\u5F55",-1),ee=L({props:{showDialog:Boolean},setup(S){const d=N(),x=W.Component,y=()=>{d.push("/login")};return(b,l)=>(p(),D("div",null,[e(s(x),{show:S.showDialog,"onUpdate:show":l[0]||(l[0]=v=>A(showDialog)?showDialog.value=v:null),title:"\u63D0\u793A",theme:"round-button","show-cancel-button":!0,confirmButtonText:"\u7ACB\u5373\u767B\u5F55",confirmButtonColor:"rgb(96, 165, 250)",cancelButtonColor:"rgb(248, 113, 113)",cancelButtonText:"\u7A0D\u540E\u767B\u5F55",onConfirm:y},{default:t(()=>[Y,Z]),_:1},8,["show"])]))}}),te={class:"bg-gray-400"},oe={class:"flex mx-5 justify-start items-center pt-5"},se={class:"border-2 w-24 h-24"},ue={class:"my-10"},le={class:"flex justify-center pb-2"},ne=u(" \u4FEE\u6539\u5934\u50CF "),ae={key:1,class:"flex w-full justify-around"},ie=u("\u53D6\u6D88"),ce=u("\u786E\u8BA4"),re={class:"ml-3"},de=o("span",{class:"text-sm"}," \u7528\u6237\u540D:",-1),_e=o("span",{class:"text-sm"},"\u8D26\u53F7id: ",-1),me={class:"mt-8"},ge=o("span",{class:"text-xs"},"\u5168\u90E8",-1),pe={class:"mt-8"},ve=u(" \u5730\u5740\u7BA1\u7406 "),fe=u(" \u6211\u7684\u6536\u85CF "),he=u("\u5E2E\u52A9"),Fe=u("\u8054\u7CFB\u5BA2\u670D"),Ce=u("\u5173\u4E8E\u6211\u4EEC"),Ee={class:"flex justify-center pt-10 pb-20"},De={key:0},Be=u("\u9000\u51FA\u767B\u5F55"),we={key:1},xe=u("\u767B\u5F55"),Ne=L({setup(S){const d=N(),x=()=>{d.push("/my/order-index")},y=()=>{d.push("/myCollect")},b=()=>{console.log("\u6267\u884ClogOut"),g.success("\u9000\u51FA\u767B\u5F55"),localStorage.removeItem("token"),localStorage.removeItem("userid"),localStorage.removeItem("username"),localStorage.removeItem("image"),localStorage.removeItem("role"),setTimeout(()=>{m.value=!0,_.value=!_.value,l.value="",v.value="",k.value=""},1e3)};let l=i();l.value=localStorage.getItem("image");let v=i();v.value=localStorage.getItem("username");let k=i();k.value=localStorage.getItem("userid");let f=i(!1);const O=()=>{localStorage.getItem("token")?(console.log("\u4FEE\u6539\u5934\u50CF"),f.value=!0):g.fail("\u5F53\u524D\u8EAB\u4EFD\u4E3A\u6E38\u5BA2\uFF0C\u8BF7\u767B\u5F55\uFF01")};let B=i(!0);const M=c=>{var n;c.file.status=="done"&&(l.value=(n=c.file.response)==null?void 0:n.url,g.success("\u4E0A\u4F20\u6210\u529F"),B.value=!1),c.file.status=="uploading"&&g.loading("\u4E0A\u4F20\u4E2D"),c.file.status=="error"&&g.fail("\u4E0A\u4F20\u5931\u8D25")},I=()=>{B.value=!0,l.value=localStorage.getItem("image")};let U=i({image:String});const R=async()=>{const c=localStorage.getItem("userid");U.value.image=l.value,await H.put(`/users/${c}`,U.value)&&(localStorage.setItem("image",l.value),g.success("\u4FEE\u6539\u6210\u529F")),I()},$=()=>{I()};let _=i(!1);const q=()=>{d.push("login")};let m=i(!1);return J(()=>{localStorage.getItem("token")?_.value=!_.value:m.value=!0}),(c,n)=>{const T=a("van-image"),h=a("van-button"),G=a("a-upload"),P=a("van-popup"),r=a("van-cell"),F=a("van-grid-item"),X=a("van-grid"),V=a("van-cell-group"),C=a("van-icon");return p(),D(K,null,[o("div",te,[o("div",oe,[o("div",se,[e(T,{width:"92",height:"92",src:s(l),onClick:O},null,8,["src"]),o("div",null,[e(P,{show:s(f),"onUpdate:show":n[0]||(n[0]=E=>A(f)?f.value=E:f=E),closeable:"","close-icon":"close",onClose:I},{default:t(()=>[o("div",ue,[o("div",null,[e(T,{width:"400",src:s(l)},null,8,["src"])]),o("div",le,[s(B)?(p(),Q(G,{key:0,action:s(z)+"/upload",onChange:M,"max-count":1},{default:t(()=>[e(h,{color:"linear-gradient(to right, #ff6034, #ee0a24)",class:"w-56"},{default:t(()=>[ne]),_:1})]),_:1},8,["action"])):w("",!0),s(B)?w("",!0):(p(),D("div",ae,[o("div",null,[e(h,{type:"warning",onClick:$},{default:t(()=>[ie]),_:1})]),o("div",null,[e(h,{type:"success",onClick:R},{default:t(()=>[ce]),_:1})])]))])])]),_:1},8,["show"])])]),o("div",re,[o("div",null,[de,u(" "+j(s(v)),1)]),o("div",null,[_e,u(" "+j(s(k)),1)])])]),o("div",me,[e(V,{inset:!0},{default:t(()=>[e(r,{title:"\u6211\u7684\u8BA2\u5355","is-link":"",onClick:x},{value:t(()=>[ge]),_:1}),e(r,null,{default:t(()=>[e(X,{"column-num":5},{default:t(()=>[e(F,{icon:"pending-payment",text:"\u5F85\u4ED8\u6B3E"}),e(F,{icon:"send-gift-o",text:"\u5F85\u53D1\u8D27"}),e(F,{icon:"logistics",text:"\u5F85\u6536\u8D27"}),e(F,{icon:"records",text:"\u5F85\u8BC4\u4EF7"}),e(F,{icon:"after-sale",text:"\u552E\u540E/\u9000\u6B3E"})]),_:1})]),_:1})]),_:1})]),o("div",pe,[e(V,{inset:""},{default:t(()=>[e(r,{onClick:n[1]||(n[1]=()=>{s(d).push("myInfo")})},{title:t(()=>[e(C,{name:"location-o"},{default:t(()=>[ve]),_:1})]),_:1}),e(r,{onClick:y},{title:t(()=>[e(C,{name:"star-o"},{default:t(()=>[fe]),_:1})]),_:1}),e(r,null,{title:t(()=>[e(C,{name:"question-o"},{default:t(()=>[he]),_:1})]),_:1}),e(r,null,{title:t(()=>[e(C,{name:"service-o"},{default:t(()=>[Fe]),_:1})]),_:1}),e(r,null,{title:t(()=>[e(C,{name:"friends-o"},{default:t(()=>[Ce]),_:1})]),_:1})]),_:1})]),o("div",Ee,[s(_)?(p(),D("div",De,[e(h,{type:"danger",class:"w-80",onClick:b},{default:t(()=>[Be]),_:1})])):w("",!0),s(_)?w("",!0):(p(),D("div",we,[e(h,{type:"primary",class:"w-80",onClick:q},{default:t(()=>[xe]),_:1})]))])]),o("div",null,[e(ee,{showDialog:s(m),"onUpdate:showDialog":n[2]||(n[2]=E=>A(m)?m.value=E:m=E)},null,8,["showDialog"])])],64)}}});export{Ne as default};
