import{d as X,g as m,P as Y,h as Z,r as _,o as p,j as f,p as v,k as e,w as t,l as u,m as O,t as i,y as d,L as R,Q as g}from"./vendor.21c9141e.js";import{h as S}from"./http.72fb258c.js";import{C as ee}from"./crud-api.fca6ec91.js";import"./user-store.80d0fbbe.js";import"./admin-store.0a078265.js";/* empty css                                                  */import"./reactivity.esm-bundler.f180a2dc.js";const te={class:"mb-2 flex justify-start"},ue=d("\u641C\u7D22"),le={class:"mt-5 h-70vh overflow-y-auto"},ae={class:"w-20 overflow-hidden text-ellipsis whitespace-nowrap"},oe={key:0,class:"w-20 overflow-hidden text-ellipsis whitespace-nowrap"},ne={key:1},se={key:0},ie={key:1},de={key:0,class:"w-20 overflow-hidden text-ellipsis whitespace-nowrap"},re={key:1},ce=d("\u4FEE\u6539"),me=d("\u5220\u9664"),_e={key:0},pe={key:1},De=X({setup(fe){const{remove:N,viss:F,addOk:ve,fetch:w,data:M,query:ke,where:k,search:E,pagination:U,pageChange:L}=ee("orders");let T=m(!0);m(!1),m("");const B=localStorage.getItem("role");let h=m([]);const V=async()=>{const o=await S.post(`/commoditys/Goods/${localStorage.userid}`);console.log(o.length),!o||o.length==0?B==="admin"?O.info("\u5F53\u524D\u4E3A\u7BA1\u7406\u5458\u7528\u6237"):O.info("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA"):(h.value=o.map(a=>({label:a.title,value:a.id})),h.value[0].value&&(k.value.shop=h.value[0].value,D.value.shop=k.value.shop,E()))},j=()=>{D.value.shop=k.value.shop,E()};m("addShop");let D=m({}),n=m({});const G=()=>{D.value={},n.value={},r.value={express:"",settingRemarks:"",state:""}};let I=m([{label:"\u672A\u652F\u4ED8",value:"\u672A\u652F\u4ED8"},{label:"\u5F85\u53D1\u8D27",value:"\u5F85\u53D1\u8D27"},{label:"\u5F85\u6536\u8D27",value:"\u5F85\u6536\u8D27"},{label:"\u5F85\u8BC4\u4EF7",value:"\u5F85\u8BC4\u4EF7"},{label:"\u9000\u8D27\u7533\u8BF7",value:"\u9000\u8D27\u7533\u8BF7"},{label:"\u5DF2\u9000\u8D27",value:"\u5DF2\u9000\u8D27"}]);const A=(o,a)=>a.label.toLowerCase().indexOf(o.toLowerCase())>=0,q=()=>{G(),console.log("cancel")};m("");let r=m({express:"",settingRemarks:"",state:""});const K=o=>{n.value=o,F.value.edit=!0,r.value.express=o.express,r.value.settingRemarks=o.settingRemarks,r.value.state=o.state},P=async o=>{console.log("editOk"),await S.put(`orders/${o._id}`,r.value),F.value.edit=!1,w()};Y(T,(o,a)=>{console.log("aaa\u4FA6\u542C\u5668"),console.log(o),console.log(a)});const $=(o,a)=>{console.log(o),R.info({title:`${a}`,content:g("div",{},`${o}`),onOk(){console.log("ok")}})},Q=(o,a)=>{console.log(o),R.info({title:`${a}`,content:g("text",{},[g("p",`\u5546\u54C1id:  ${o._id}`),g("p",`\u5546\u54C1\u540D\u79F0:${o.commodityName}`),g("p",`\u5546\u54C1\u4EF7\u683C:${o.price}`)]),onOk(){console.log("ok")}})};return Z(()=>{V(),B=="admin"&&w()}),(o,a)=>{const x=_("a-select"),s=_("a-form-item"),y=_("a-form"),C=_("a-button"),c=_("a-table-column"),z=_("a-table"),H=_("a-input"),J=_("a-textarea"),W=_("a-modal");return p(),f("div",null,[v("div",te,[v("div",null,[e(y,{layout:"inline"},{default:t(()=>[e(s,{label:"\u5207\u6362\u5E97\u94FA",class:"w-44"},{default:t(()=>[e(x,{options:u(h),value:u(k).shop,"onUpdate:value":a[0]||(a[0]=l=>u(k).shop=l),onChange:j},null,8,["options","value"])]),_:1})]),_:1})]),v("div",null,[e(y,{layout:"inline"},{default:t(()=>[e(s,{label:"\u72B6\u6001",class:"w-44"},{default:t(()=>[e(x,{options:u(I),value:u(k).state,"onUpdate:value":a[1]||(a[1]=l=>u(k).state=l),allowClear:!0,showSearch:!0,"filter-Option":A},null,8,["options","value"])]),_:1}),e(s,null,{default:t(()=>[e(C,{type:"primary",onClick:u(E)},{default:t(()=>[ue]),_:1},8,["onClick"])]),_:1})]),_:1})])]),v("div",le,[e(z,{dataSource:u(M),rowKey:"_id",pagination:u(U),onChange:u(L)},{default:t(()=>[e(c,{title:"\u8BA2\u5355\u53F7",dataIndex:"_id",key:"_id",align:"center"}),e(c,{title:"\u5546\u54C1",dataIndex:"commodity",key:"commodity",align:"center"},{default:t(({record:l})=>[e(C,{type:"link",onClick:b=>Q(l.commodity,"\u5546\u54C1")},{default:t(()=>[v("div",ae,i(l.commodity.commodityName),1)]),_:2},1032,["onClick"])]),_:1}),e(c,{align:"center",title:"\u6570\u91CF",dataIndex:"goodsNum",key:"goodsNum"}),e(c,{align:"center",title:"\u8BA2\u5355\u5907\u6CE8",dataIndex:"remarks",key:"remarks"},{default:t(({record:l})=>[e(C,{type:"link",onClick:b=>$(l.remarks,"\u8BA2\u5355\u5907\u6CE8")},{default:t(()=>[l.remarks?(p(),f("div",oe,i(l.remarks),1)):(p(),f("div",ne,"\u65E0\u5907\u6CE8"))]),_:2},1032,["onClick"])]),_:1}),e(c,{align:"center",title:"\u91D1\u989D",dataIndex:"money",key:"money"}),e(c,{align:"center",title:"\u8BA2\u5355\u72B6\u6001",dataIndex:"state",key:"state"}),e(c,{align:"center",title:"\u8BA2\u5355\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt",key:"createdAt"}),e(c,{align:"center",title:"\u6536\u8D27\u4EBA\u4FE1\u606F",dataIndex:"userInfo",key:"userInfo"},{default:t(({record:l})=>[v("div",null,i(l.userInfo.name),1)]),_:1}),e(c,{align:"center",title:"\u5FEB\u9012",dataIndex:"express",key:"express"},{default:t(({record:l})=>[l.express?(p(),f("div",se,i(l.express),1)):(p(),f("div",ie,"\u65E0"))]),_:1}),e(c,{align:"center",title:"\u64CD\u4F5C\u5907\u6CE8",dataIndex:"settingRemarks",key:"settingRemarks"},{default:t(({record:l})=>[e(C,{type:"link",onClick:b=>$(l.settingRemarks,"\u64CD\u4F5C\u5907\u6CE8")},{default:t(()=>[l.settingRemarks?(p(),f("div",de,i(l.settingRemarks),1)):(p(),f("div",re,"\u65E0\u5907\u6CE8"))]),_:2},1032,["onClick"])]),_:1}),e(c,{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",align:"center"},{default:t(({record:l})=>[v("div",null,[e(C,{type:"link",onClick:b=>K(l)},{default:t(()=>[ce]),_:2},1032,["onClick"]),e(C,{type:"link",onClick:b=>u(N)(l,l.commodityName)},{default:t(()=>[me]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["dataSource","pagination","onChange"])]),v("div",null,[e(W,{visible:u(F).edit,"onUpdate:visible":a[5]||(a[5]=l=>u(F).edit=l),title:"\u4FEE\u6539",onOk:a[6]||(a[6]=l=>P(u(n))),afterClose:q,centered:!0,destroyOnClose:!0},{default:t(()=>[e(y,{model:u(n)},{default:t(()=>[e(s,{label:"\u8BA2\u5355\u53F7"},{default:t(()=>[d(i(u(n)._id),1)]),_:1}),e(s,{label:"\u5546\u54C1"},{default:t(()=>[e(y,null,{default:t(()=>[e(s,{label:"\u5546\u54C1\u540D\u79F0"},{default:t(()=>[d(i(u(n).commodity.commodityName),1)]),_:1}),e(s,{label:"\u5546\u54C1id"},{default:t(()=>[d(i(u(n).commodity._id),1)]),_:1}),e(s,{label:"\u5546\u54C1\u4EF7\u683C"},{default:t(()=>[d(i(u(n).commodity.price),1)]),_:1})]),_:1})]),_:1}),e(s,{label:"\u6570\u91CF"},{default:t(()=>[d(i(u(n).goodsNum),1)]),_:1}),e(s,{label:"\u8BA2\u5355\u5907\u6CE8"},{default:t(()=>[u(n).remarks&&u(n).remark!=""?(p(),f("div",_e,i(u(n).remarks),1)):(p(),f("div",pe,"\u65E0"))]),_:1}),e(s,{label:"\u8BA2\u5355\u91D1\u989D"},{default:t(()=>[d(i(u(n).money),1)]),_:1}),e(s,{label:"\u8BA2\u5355\u72B6\u6001"},{default:t(()=>[e(x,{options:u(I),value:u(r).state,"onUpdate:value":a[2]||(a[2]=l=>u(r).state=l),allowClear:!0,showSearch:!0,"filter-Option":A},null,8,["options","value"])]),_:1}),e(s,{label:"\u6536\u8D27\u4EBA\u4FE1\u606F"},{default:t(()=>[e(y,null,{default:t(()=>[e(s,{label:"\u59D3\u540D"},{default:t(()=>[d(i(u(n).userInfo.name),1)]),_:1}),e(s,{label:"\u59D3\u540D"},{default:t(()=>[d(i(u(n).userInfo.name),1)]),_:1}),e(s,{label:"\u5730\u5740"},{default:t(()=>[d(i(u(n).userInfo.province)+"\\ "+i(u(n).userInfo.city)+"\\ "+i(u(n).userInfo.county)+"\\ "+i(u(n).userInfo.address)+"\\ ",1)]),_:1}),e(s,{label:"\u8054\u7CFB\u7535\u8BDD"},{default:t(()=>[d(i(u(n).userInfo.tel),1)]),_:1}),e(s,{label:"\u90AE\u653F\u7F16\u53F7"},{default:t(()=>[d(i(u(n).userInfo.postalCode),1)]),_:1})]),_:1})]),_:1}),e(s,{label:"\u5FEB\u9012\u53F7"},{default:t(()=>[e(H,{value:u(r).express,"onUpdate:value":a[3]||(a[3]=l=>u(r).express=l)},null,8,["value"])]),_:1}),e(s,{label:"\u64CD\u4F5C\u5907\u6CE8"},{default:t(()=>[e(J,{row:4,value:u(r).settingRemarks,"onUpdate:value":a[4]||(a[4]=l=>u(r).settingRemarks=l),maxlength:"200",showCount:!0},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])])}}});export{De as default};
