import{c as P,u as V,t as E,w as O,e as h,m as x,n as H,B as W,I as Y,p as G,L as J,d as Q,f as X,g as Z,j as ee,k as ne,l as te,a as oe,P as ae,o as le,q as ie,r as se,s as re,v as D,x as ce,b as ue,y as de,z as fe}from"./http.1936afbf.js";import{d as T,f as a,i as ge,j as N,p as K}from"./user.cb0acf2c.js";import{V as me,M as Be}from"./reactivity.esm-bundler.c1ee0d40.js";const[L,he]=P("action-bar"),U=Symbol(L),Ce={safeAreaInsetBottom:E};var be=T({name:L,props:Ce,setup(e,{slots:l}){const{linkChildren:t}=V(U);return t(),()=>{var i;return a("div",{class:[he(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(i=l.default)==null?void 0:i.call(l)])}}});const ve=O(be),j={to:[String,Object],url:String,replace:Boolean};function ye({to:e,url:l,replace:t,$router:i}){e&&i?i[t?"replace":"push"](e):l&&(t?location.replace(l):location.href=l)}function q(){const e=ge().proxy;return()=>ye(e)}const[we,w]=P("button"),xe=h({},j,{tag:x("button"),text:String,icon:String,type:x("default"),size:x("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:x("button"),loadingSize:H,loadingText:String,loadingType:String,iconPosition:x("left")});var Se=T({name:we,props:xe,emits:["click"],setup(e,{emit:l,slots:t}){const i=q(),u=()=>t.loading?t.loading():a(J,{size:e.loadingSize,type:e.loadingType,class:w("loading")},null),C=()=>{if(e.loading)return u();if(t.icon)return a("div",{class:w("icon")},[t.icon()]);if(e.icon)return a(Y,{name:e.icon,class:w("icon"),classPrefix:e.iconPrefix},null)},v=()=>{let o;if(e.loading?o=e.loadingText:o=t.default?t.default():e.text,o)return a("span",{class:w("text")},[o])},c=()=>{const{color:o,plain:B}=e;if(o){const g={color:B?o:"white"};return B||(g.background=o),o.includes("gradient")?g.border=0:g.borderColor=o,g}},b=o=>{e.loading?G(o):e.disabled||(l("click",o),i())};return()=>{const{tag:o,type:B,size:g,block:S,round:_,plain:I,square:R,loading:$,disabled:n,hairline:r,nativeType:m,iconPosition:d}=e,y=[w([B,g,{plain:I,block:S,round:_,square:R,loading:$,disabled:n,hairline:r}]),{[W]:r}];return a(o,{type:m,class:y,style:c(),disabled:n,onClick:b},{default:()=>[a("div",{class:w("content")},[d==="left"&&C(),v(),d==="right"&&C()])]})}}});const z=O(Se),[pe,ke]=P("action-bar-button"),Pe=h({},j,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Oe=T({name:pe,props:Pe,setup(e,{slots:l}){const t=q(),{parent:i,index:u}=Q(U),C=N(()=>{if(i){const c=i.children[u.value-1];return!(c&&"isButton"in c)}}),v=N(()=>{if(i){const c=i.children[u.value+1];return!(c&&"isButton"in c)}});return X({isButton:!0}),()=>{const{type:c,icon:b,text:o,color:B,loading:g,disabled:S}=e;return a(z,{class:ke([c,{last:v.value,first:C.value}]),size:"large",type:c,icon:b,color:B,loading:g,disabled:S,onClick:t},{default:()=>[l.default?l.default():o]})}}});const F=O(Oe),[Te,f,k]=P("dialog"),_e=h({},Z,{title:String,theme:String,width:H,message:[String,Function],callback:Function,allowHtml:Boolean,className:ee,transition:x("van-dialog-bounce"),messageAlign:String,closeOnPopstate:E,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:E,closeOnClickOverlay:Boolean}),Ie=[...ne,"transition","closeOnPopstate"];var M=T({name:Te,props:_e,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:t}){const i=me(),u=Be({confirm:!1,cancel:!1}),C=n=>l("update:show",n),v=n=>{var r;C(!1),(r=e.callback)==null||r.call(e,n)},c=n=>()=>{!e.show||(l(n),e.beforeClose?(u[n]=!0,re(e.beforeClose,{args:[n],done(){v(n),u[n]=!1},canceled(){u[n]=!1}})):v(n))},b=c("cancel"),o=c("confirm"),B=le(n=>{var r,m;if(n.target!==((m=(r=i.value)==null?void 0:r.popupRef)==null?void 0:m.value))return;({Enter:e.showConfirmButton?o:D,Escape:e.showCancelButton?b:D})[n.key](),l("keydown",n)},["enter","esc"]),g=()=>{const n=t.title?t.title():e.title;if(n)return a("div",{class:f("header",{isolated:!e.message&&!t.default})},[n])},S=n=>{const{message:r,allowHtml:m,messageAlign:d}=e,y=f("message",{"has-title":n,[d]:d}),A=ce(r)?r():r;return m&&typeof A=="string"?a("div",{class:y,innerHTML:A},null):a("div",{class:y},[A])},_=()=>{if(t.default)return a("div",{class:f("content")},[t.default()]);const{title:n,message:r,allowHtml:m}=e;if(r){const d=!!(n||t.title);return a("div",{key:m?1:0,class:f("content",{isolated:!d})},[S(d)])}},I=()=>a("div",{class:[se,f("footer")]},[e.showCancelButton&&a(z,{size:"large",text:e.cancelButtonText||k("cancel"),class:f("cancel"),style:{color:e.cancelButtonColor},loading:u.cancel,onClick:b},null),e.showConfirmButton&&a(z,{size:"large",text:e.confirmButtonText||k("confirm"),class:[f("confirm"),{[ie]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:u.confirm,onClick:o},null)]),R=()=>a(ve,{class:f("footer")},{default:()=>[e.showCancelButton&&a(F,{type:"warning",text:e.cancelButtonText||k("cancel"),class:f("cancel"),color:e.cancelButtonColor,loading:u.cancel,onClick:b},null),e.showConfirmButton&&a(F,{type:"danger",text:e.confirmButtonText||k("confirm"),class:f("confirm"),color:e.confirmButtonColor,loading:u.confirm,onClick:o},null)]}),$=()=>t.footer?t.footer():e.theme==="round-button"?R():I();return()=>{const{width:n,title:r,theme:m,message:d,className:y}=e;return a(ae,K({ref:i,role:"dialog",class:[f([m]),y],style:{width:oe(n)},tabindex:0,"aria-labelledby":r||d,onKeydown:B,"onUpdate:show":C},te(e,Ie)),{default:()=>[g(),_(),$()]})}}});let p;function Re(){({instance:p}=de({setup(){const{state:l,toggle:t}=fe();return()=>a(M,K(l,{"onUpdate:show":t}),null)}}))}function s(e){return ue?new Promise((l,t)=>{p||Re(),p.open(h({},s.currentOptions,e,{callback:i=>{(i==="confirm"?l:t)(i)}}))}):Promise.resolve()}s.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};s.currentOptions=h({},s.defaultOptions);s.alert=s;s.confirm=e=>s(h({showCancelButton:!0},e));s.close=()=>{p&&p.toggle(!1)};s.setDefaultOptions=e=>{h(s.currentOptions,e)};s.resetDefaultOptions=()=>{s.currentOptions=h({},s.defaultOptions)};s.Component=O(M);s.install=e=>{e.use(s.Component),e.config.globalProperties.$dialog=s};export{s as D};
