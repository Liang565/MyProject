import{c as p,u as j,t as $,a as O,e as C,m as x,n as H,B as V,I as Y,p as G,L as J,b as Q,d as X,f as Z,g as ee,h as ne,i as te,j as oe,P as ae,k as le,l as ie,o as se,q as re,r as z,s as ce,v as ue,x as de,y as fe}from"./function-call.c3127fba.js";import{r as K,u as L}from"./use-route.656cc303.js";import{d as T,f as a,q as N,C as q}from"./user.9cea656e.js";import{q as ge,O as me}from"./reactivity.esm-bundler.f180a2dc.js";const[U,Be]=p("action-bar"),M=Symbol(U),Ce={safeAreaInsetBottom:$};var he=T({name:U,props:Ce,setup(e,{slots:s}){const{linkChildren:t}=j(M);return t(),()=>{var r;return a("div",{class:[Be(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(r=s.default)==null?void 0:r.call(s)])}}});const be=O(he),[ve,w]=p("button"),ye=C({},K,{tag:x("button"),text:String,icon:String,type:x("default"),size:x("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:x("button"),loadingSize:H,loadingText:String,loadingType:String,iconPosition:x("left")});var we=T({name:ve,props:ye,emits:["click"],setup(e,{emit:s,slots:t}){const r=L(),u=()=>t.loading?t.loading():a(J,{size:e.loadingSize,type:e.loadingType,class:w("loading")},null),h=()=>{if(e.loading)return u();if(t.icon)return a("div",{class:w("icon")},[t.icon()]);if(e.icon)return a(Y,{name:e.icon,class:w("icon"),classPrefix:e.iconPrefix},null)},v=()=>{let o;if(e.loading?o=e.loadingText:o=t.default?t.default():e.text,o)return a("span",{class:w("text")},[o])},c=()=>{const{color:o,plain:B}=e;if(o){const g={color:B?o:"white"};return B||(g.background=o),o.includes("gradient")?g.border=0:g.borderColor=o,g}},b=o=>{e.loading?G(o):e.disabled||(s("click",o),r())};return()=>{const{tag:o,type:B,size:g,block:S,round:_,plain:R,square:I,loading:A,disabled:n,hairline:i,nativeType:m,iconPosition:d}=e,y=[w([B,g,{plain:R,block:S,round:_,square:I,loading:A,disabled:n,hairline:i}]),{[V]:i}];return a(o,{type:m,class:y,style:c(),disabled:n,onClick:b},{default:()=>[a("div",{class:w("content")},[d==="left"&&h(),v(),d==="right"&&h()])]})}}});const D=O(we),[xe,Se]=p("action-bar-button"),ke=C({},K,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Pe=T({name:xe,props:ke,setup(e,{slots:s}){const t=L(),{parent:r,index:u}=Q(M),h=N(()=>{if(r){const c=r.children[u.value-1];return!(c&&"isButton"in c)}}),v=N(()=>{if(r){const c=r.children[u.value+1];return!(c&&"isButton"in c)}});return X({isButton:!0}),()=>{const{type:c,icon:b,text:o,color:B,loading:g,disabled:S}=e;return a(D,{class:Se([c,{last:v.value,first:h.value}]),size:"large",type:c,icon:b,color:B,loading:g,disabled:S,onClick:t},{default:()=>[s.default?s.default():o]})}}});const F=O(Pe),[pe,f,P]=p("dialog"),Oe=C({},Z,{title:String,theme:String,width:H,message:[String,Function],callback:Function,allowHtml:Boolean,className:ee,transition:x("van-dialog-bounce"),messageAlign:String,closeOnPopstate:$,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:$,closeOnClickOverlay:Boolean}),Te=[...ne,"transition","closeOnPopstate"];var W=T({name:pe,props:Oe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:s,slots:t}){const r=ge(),u=me({confirm:!1,cancel:!1}),h=n=>s("update:show",n),v=n=>{var i;h(!1),(i=e.callback)==null||i.call(e,n)},c=n=>()=>{!e.show||(s(n),e.beforeClose?(u[n]=!0,re(e.beforeClose,{args:[n],done(){v(n),u[n]=!1},canceled(){u[n]=!1}})):v(n))},b=c("cancel"),o=c("confirm"),B=le(n=>{var i,m;if(n.target!==((m=(i=r.value)==null?void 0:i.popupRef)==null?void 0:m.value))return;({Enter:e.showConfirmButton?o:z,Escape:e.showCancelButton?b:z})[n.key](),s("keydown",n)},["enter","esc"]),g=()=>{const n=t.title?t.title():e.title;if(n)return a("div",{class:f("header",{isolated:!e.message&&!t.default})},[n])},S=n=>{const{message:i,allowHtml:m,messageAlign:d}=e,y=f("message",{"has-title":n,[d]:d}),E=ce(i)?i():i;return m&&typeof E=="string"?a("div",{class:y,innerHTML:E},null):a("div",{class:y},[E])},_=()=>{if(t.default)return a("div",{class:f("content")},[t.default()]);const{title:n,message:i,allowHtml:m}=e;if(i){const d=!!(n||t.title);return a("div",{key:m?1:0,class:f("content",{isolated:!d})},[S(d)])}},R=()=>a("div",{class:[se,f("footer")]},[e.showCancelButton&&a(D,{size:"large",text:e.cancelButtonText||P("cancel"),class:f("cancel"),style:{color:e.cancelButtonColor},loading:u.cancel,onClick:b},null),e.showConfirmButton&&a(D,{size:"large",text:e.confirmButtonText||P("confirm"),class:[f("confirm"),{[ie]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:u.confirm,onClick:o},null)]),I=()=>a(be,{class:f("footer")},{default:()=>[e.showCancelButton&&a(F,{type:"warning",text:e.cancelButtonText||P("cancel"),class:f("cancel"),color:e.cancelButtonColor,loading:u.cancel,onClick:b},null),e.showConfirmButton&&a(F,{type:"danger",text:e.confirmButtonText||P("confirm"),class:f("confirm"),color:e.confirmButtonColor,loading:u.confirm,onClick:o},null)]}),A=()=>t.footer?t.footer():e.theme==="round-button"?I():R();return()=>{const{width:n,title:i,theme:m,message:d,className:y}=e;return a(ae,q({ref:r,role:"dialog",class:[f([m]),y],style:{width:oe(n)},tabindex:0,"aria-labelledby":i||d,onKeydown:B,"onUpdate:show":h},te(e,Te)),{default:()=>[g(),_(),A()]})}}});let k;function _e(){({instance:k}=de({setup(){const{state:s,toggle:t}=fe();return()=>a(W,q(s,{"onUpdate:show":t}),null)}}))}function l(e){return ue?new Promise((s,t)=>{k||_e(),k.open(C({},l.currentOptions,e,{callback:r=>{(r==="confirm"?s:t)(r)}}))}):Promise.resolve()}l.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};l.currentOptions=C({},l.defaultOptions);l.alert=l;l.confirm=e=>l(C({showCancelButton:!0},e));l.close=()=>{k&&k.toggle(!1)};l.setDefaultOptions=e=>{C(l.currentOptions,e)};l.resetDefaultOptions=()=>{l.currentOptions=C({},l.defaultOptions)};l.Component=O(W);l.install=e=>{e.use(l.Component),e.config.globalProperties.$dialog=l};export{l as D};
