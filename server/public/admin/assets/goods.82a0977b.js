import{d as W,h as p,G as X,j as Y,r as v,o as U,k as w,p as d,l as e,w as o,u as t,n as Z,F as ee,m as L,v as x,y as N}from"./vendor.ce4e530f.js";import{h as D}from"./http.fc6e7509.js";import{C as te}from"./crud-api.7293b100.js";import{_ as le,a as A}from"./myimglist.60ceed87.js";import"./admin-store.26ef1a35.js";import"./user-store.e39d293f.js";import"./reactivity.esm-bundler.c1ee0d40.js";import"./register-and-login.1c71b176.js";const ae=d("div",{class:"mb-2 text-2xl"},"\u5546\u54C1\u7BA1\u7406",-1),ue={class:"mb-2 flex justify-start"},oe=N(" \u65B0\u589E\u5546\u54C1 "),ie={class:"ml-5"},ne=N("\u641C\u7D22"),de=["src"],se={class:"mt-5"},me={key:0},re={key:1},pe=N("\u4FEE\u6539"),ve=N("\u5220\u9664"),Fe=W({setup(ce){const{remove:h,viss:y,editOk:$,addOk:M,fetch:R,data:V,query:fe,where:m,search:F,pagination:j,pageChange:G}=te("commoditys");let c=p(!0),_=p(!1),T=p(""),C=p([]);const q=async()=>{const i=await D.post(`/commoditys/Goods/${localStorage.userid}`);i.length===0?L.info("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA"):(C.value=i.map(a=>({label:a.title,value:a.id})),C.value[0].value&&(m.value.shop=C.value[0].value,u.value.shop=m.value.shop,F()))},K=()=>{u.value.shop=m.value.shop,F()};p("addShop"),m.value={commodityName:"",title:"",shop:""};let u=p({commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,price:0,shop:""});const z=()=>{u.value={commodityName:"",commodityIntroduce:"",image:[],title:"",parameter:[],commodityNum:0,price:0,shop:u.value.shop}},H=()=>{C.value.length===0?L.error("\u8BE5\u7528\u6237\u4E0B\u65E0\u5E97\u94FA,\u4E0D\u80FD\u65B0\u589E\u5546\u54C1"):(y.value.add=!0,c.value=!c.value)};let g=p([]);const J=async()=>{const i=await D.get("commodity-class",{params:{limit:999}});g.value=i.data.map(a=>({label:a.title,value:a._id}))},B=(i,a)=>a.label.toLowerCase().indexOf(i.toLowerCase())>=0,S=()=>{z(),console.log("cancel")};let O=p("");const P=i=>{u.value.image=i.image,u.value.commodityName=i.commodityName,u.value.price=i.price,u.value.commodityIntroduce=i.commodityIntroduce,u.value.title=i.title._id,u.value.parameter=i.parameter,u.value.commodityNum=i.commodityNum,O.value=i._id,y.value.edit=!0,c.value=!c.value};return X(c,(i,a)=>{console.log("aaa\u4FA6\u542C\u5668"),console.log(i),console.log(a)}),Y(()=>{J(),q(),localStorage.getItem("role")=="admin"&&R()}),(i,a)=>{const b=v("a-button"),E=v("a-select"),n=v("a-form-item"),k=v("a-form"),s=v("a-input"),I=v("a-modal"),r=v("a-table-column"),Q=v("a-table");return U(),w(ee,null,[d("div",null,[ae,d("div",ue,[d("div",null,[e(b,{onClick:H,type:"primary"},{default:o(()=>[oe]),_:1})]),d("div",ie,[e(k,{layout:"inline"},{default:o(()=>[e(n,{label:"\u5207\u6362\u5E97\u94FA",class:"w-44"},{default:o(()=>[e(E,{options:t(C),value:t(m).shop,"onUpdate:value":a[0]||(a[0]=l=>t(m).shop=l),onChange:K},null,8,["options","value"])]),_:1})]),_:1})]),d("div",null,[e(k,{layout:"inline"},{default:o(()=>[e(n,{label:"\u5546\u54C1\u540D\uFF1A",class:"w-52"},{default:o(()=>[e(s,{value:t(m).commodityName,"onUpdate:value":a[1]||(a[1]=l=>t(m).commodityName=l)},null,8,["value"])]),_:1}),e(n,{label:"\u6240\u5C5E\u5206\u7C7B",class:"w-44"},{default:o(()=>[e(E,{options:t(g),value:t(m).title,"onUpdate:value":a[2]||(a[2]=l=>t(m).title=l),allowClear:!0,showSearch:!0,"filter-Option":B},null,8,["options","value"])]),_:1}),e(n,null,{default:o(()=>[e(b,{type:"primary",onClick:t(F)},{default:o(()=>[ne]),_:1},8,["onClick"])]),_:1})]),_:1})])]),e(I,{visible:t(_),"onUpdate:visible":a[3]||(a[3]=l=>Z(_)?_.value=l:_=l),title:"Basic Modal",centered:!0},{default:o(()=>[d("img",{src:t(T)},null,8,de)]),_:1},8,["visible"]),d("div",se,[e(Q,{dataSource:t(V),rowKey:"title",pagination:t(j),onChange:t(G),scroll:{y:390}},{default:o(()=>[e(r,{title:"\u5546\u54C1\u540D",dataIndex:"commodityName",key:"commodityName",align:"center"}),e(r,{title:"\u5546\u54C1\u4ECB\u7ECD",dataIndex:"commodityIntroduce",key:"commodityIntroduce",align:"center"}),e(r,{title:"\u53C2\u6570",dataIndex:"parameter",key:"parameter",align:"center"},{default:o(({record:l})=>[d("span",null,x(l.parameter),1)]),_:1}),e(r,{align:"center",title:"\u6570\u91CF",dataIndex:"commodityNum",key:"commodityNum"}),e(r,{title:"\u4EF7\u683C",dataIndex:"price",key:"price",align:"center"}),e(r,{title:"\u5206\u7C7B",dataIndex:"title",key:"title",align:"center"},{default:o(({record:l})=>{var f;return[d("span",null,x((f=l.title)==null?void 0:f.title),1)]}),_:1}),e(r,{title:"\u6240\u5C5E\u5546\u94FA",dataIndex:"shop",key:"shop",align:"center"},{default:o(({record:l})=>{var f;return[d("span",null,x((f=l.shop)==null?void 0:f.title),1)]}),_:1}),e(r,{title:"\u56FE\u7247",dataIndex:"image",key:"image",align:"center"},{default:o(({record:l})=>[l.image.length==0?(U(),w("div",me,"\u7A7A")):(U(),w("div",re,[e(le,{URL:l.image},null,8,["URL"])]))]),_:1}),e(r,{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",align:"center"},{default:o(({record:l})=>[d("div",null,[e(b,{type:"link",onClick:f=>P(l)},{default:o(()=>[pe]),_:2},1032,["onClick"]),e(b,{type:"link",onClick:f=>t(h)(l,l.title)},{default:o(()=>[ve]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["dataSource","pagination","onChange"])])]),d("div",null,[e(I,{visible:t(y).add,"onUpdate:visible":a[11]||(a[11]=l=>t(y).add=l),title:"\u65B0\u589E\u5546\u54C1",onOk:a[12]||(a[12]=l=>t(M)(t(u))),afterClose:S,centered:!0},{default:o(()=>[e(k,{model:t(u)},{default:o(()=>[e(n,{label:"\u5546\u54C1\u540D"},{default:o(()=>[e(s,{value:t(u).commodityName,"onUpdate:value":a[4]||(a[4]=l=>t(u).commodityName=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5206\u7C7B"},{default:o(()=>[e(E,{allowClear:!0,showSearch:!0,options:t(g),value:t(u).title,"onUpdate:value":a[5]||(a[5]=l=>t(u).title=l),"filter-Option":B},null,8,["options","value"])]),_:1}),e(n,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:o(()=>[e(s,{value:t(u).commodityIntroduce,"onUpdate:value":a[6]||(a[6]=l=>t(u).commodityIntroduce=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5546\u54C1\u56FE\u7247"},{default:o(()=>[e(A,{onOnSuccess:a[7]||(a[7]=l=>{t(u).image=l}),resetList:t(c)},null,8,["resetList"])]),_:1}),e(n,{label:"\u53C2\u6570"},{default:o(()=>[e(s,{value:t(u).parameter,"onUpdate:value":a[8]||(a[8]=l=>t(u).parameter=l)},null,8,["value"])]),_:1}),e(n,{label:"\u6570\u91CF"},{default:o(()=>[e(s,{value:t(u).commodityNum,"onUpdate:value":a[9]||(a[9]=l=>t(u).commodityNum=l)},null,8,["value"])]),_:1}),e(n,{label:"\u4EF7\u683C"},{default:o(()=>[e(s,{value:t(u).price,"onUpdate:value":a[10]||(a[10]=l=>t(u).price=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),d("div",null,[e(I,{visible:t(y).edit,"onUpdate:visible":a[20]||(a[20]=l=>t(y).edit=l),title:"\u4FEE\u6539\u5546\u54C1\u4FE1\u606F",onOk:a[21]||(a[21]=l=>t($)(t(O),t(u))),afterClose:S,centered:!0},{default:o(()=>[e(k,{model:t(u)},{default:o(()=>[e(n,{label:"\u5546\u54C1\u540D"},{default:o(()=>[e(s,{value:t(u).commodityName,"onUpdate:value":a[13]||(a[13]=l=>t(u).commodityName=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5206\u7C7B"},{default:o(()=>[e(E,{allowClear:!0,showSearch:!0,options:t(g),value:t(u).title,"onUpdate:value":a[14]||(a[14]=l=>t(u).title=l),"filter-Option":B},null,8,["options","value"])]),_:1}),e(n,{label:"\u5546\u54C1\u7B80\u4ECB"},{default:o(()=>[e(s,{value:t(u).commodityIntroduce,"onUpdate:value":a[15]||(a[15]=l=>t(u).commodityIntroduce=l)},null,8,["value"])]),_:1}),e(n,{label:"\u5546\u54C1\u56FE\u7247"},{default:o(()=>[e(A,{imgList:t(u).image,resetList:t(c),onOnSuccess:a[16]||(a[16]=l=>{t(u).image=l})},null,8,["imgList","resetList"])]),_:1}),e(n,{label:"\u53C2\u6570"},{default:o(()=>[e(s,{value:t(u).parameter,"onUpdate:value":a[17]||(a[17]=l=>t(u).parameter=l)},null,8,["value"])]),_:1}),e(n,{label:"\u6570\u91CF"},{default:o(()=>[e(s,{value:t(u).commodityNum,"onUpdate:value":a[18]||(a[18]=l=>t(u).commodityNum=l)},null,8,["value"])]),_:1}),e(n,{label:"\u4EF7\u683C"},{default:o(()=>[e(s,{value:t(u).price,"onUpdate:value":a[19]||(a[19]=l=>t(u).price=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])],64)}}});export{Fe as default};
