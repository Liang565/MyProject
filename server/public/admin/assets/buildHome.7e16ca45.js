import{a as l}from"./index.016760bd.js";import{h as c}from"./http.3d895303.js";import{d as V}from"./vuedraggable.umd.c01f8895.js";import{f as R,g as a,h as q,r as A,o as u,j as m,p as t,F as P,q as T,l as s,k as p,w as d,m as D,y as C,t as $,c as I,D as L,E as M}from"./vendor.1e3ef9c3.js";function O(r){switch(r){case"../../components/components/grid.vue":return l(()=>import("./grid.2d2c393c.js"),["assets/grid.2d2c393c.js","assets/grid.d6964c02.css","assets/upload.vue_vue_type_style_index_0_lang.93e2bfe0.css","assets/icon.389a1795.js","assets/vendor.1e3ef9c3.js","assets/upload.4264d9be.js","assets/register-and-login.8ccb0e5d.js","assets/admin-store.fe4adc91.js","assets/http.3d895303.js"]);case"../../components/components/shopCard.vue":return l(()=>import("./shopCard.20d3b61d.js"),["assets/shopCard.20d3b61d.js","assets/grid.d6964c02.css","assets/upload.vue_vue_type_style_index_0_lang.93e2bfe0.css","assets/admin-store.fe4adc91.js","assets/vendor.1e3ef9c3.js","assets/http.3d895303.js"]);case"../../components/components/swipe.vue":return l(()=>import("./swipe.2268ac47.js"),["assets/swipe.2268ac47.js","assets/swipe.8a05e310.css","assets/upload.vue_vue_type_style_index_0_lang.93e2bfe0.css","assets/upload.4264d9be.js","assets/register-and-login.8ccb0e5d.js","assets/admin-store.fe4adc91.js","assets/vendor.1e3ef9c3.js","assets/http.3d895303.js"]);default:return new Promise(function(_,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}const N={class:"mt-5 flex justify-between"},j=t("div",null,"\u6DFB\u52A0\u7EC4\u4EF6",-1),U={class:"fixed bottom-50vh"},G=C("\u4FDD\u5B58"),S={class:"w-500 h-70vh bg-white overflow-y-auto"},z=t("div",null,[t("div",{id:"option"},"\u8BBE\u7F6E")],-1),W=R({setup(r){const _=e=>M(()=>O(`../../components/components/${e}.vue`));let i=a(),n=a({}),v=a();a();let f=a();const g=e=>{v.value=e.index},x=async()=>{const e=await c.get("components",{params:{query:{limit:999,where:{key:"public"}}}});i.value=e.data},k=async()=>{const e=await c.post("build-home/findone",{name:"\u9996\u9875"});n.value=e},E=e=>{e==="grid"?n.value.components.push({name:e,option:{index:Date.now(),column:4},content:{},index:Date.now()}):n.value.components.push({name:e,option:{index:Date.now(),height:356,autoplay:3e3},content:{},index:Date.now()})},b=async e=>{n.value.components.splice(n.value.components.indexOf(e),1)},B=async()=>{const e=await c.get("commoditys",{params:{query:{limit:999}}});f.value=e.data},F=async()=>{await c.put(`build-home/${n.value._id}`,{components:n.value.components})?D.success("\u4FDD\u5B58\u6210\u529F~"):D.success("\u4FDD\u5B58\u5931\u8D25~")};return q(()=>{x(),B(),k()}),(e,h)=>{const y=A("a-button");return u(),m("div",null,[t("div",N,[t("div",null,[j,(u(!0),m(P,null,T(s(i),o=>(u(),m("div",null,[p(y,{type:"primary",class:"w-20 my-2",onClick:w=>E(o.title)},{default:d(()=>[C($(o.name),1)]),_:2},1032,["onClick"])]))),256)),t("div",U,[p(y,{type:"primary",class:"w-20 my-2",onClick:F},{default:d(()=>[G]),_:1})])]),t("div",S,[p(s(V),{modelValue:s(n).components,"onUpdate:modelValue":h[0]||(h[0]=o=>s(n).components=o),group:"people","item-key":"id"},{item:d(({element:o})=>[t("div",null,[(u(),I(L(_(o.name)),{option:o.option,content:o.content,index:s(v),goods:s(f),onClick:w=>g(o),onRemoveComponent:w=>b(o)},null,8,["option","content","index","goods","onClick","onRemoveComponent"]))])]),_:1},8,["modelValue"])]),z])])}}});export{W as default};
