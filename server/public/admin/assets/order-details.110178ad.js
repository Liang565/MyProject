import{h as C}from"./http.3d895303.js";import"./user-store.80d0fbbe.js";import"./admin-store.fe4adc91.js";/* empty css                                                  */import{d as K,u as M,a as W,o as X,r as D,b as d,c as g,e as o,f as s,H as y,G as _,w as n,h as b}from"./user.0f0244cd.js";import"./vue-types.m.1da1f69a.js";import{_ as J}from"./iconPark.1cfb687a.js";import{_ as O}from"./info.d12a4a1c.js";import{q as v,X as l,V as t,a as B}from"./reactivity.esm-bundler.f180a2dc.js";import{T as w}from"./function-call.b3f16382.js";import{D as Q}from"./function-call.481ffa2f.js";import"./vendor.1e3ef9c3.js";import"./api.e2fff66e.js";import"./crud-api.b919ecb7.js";import"./index.016760bd.js";import"./http.2cf225b3.js";import"./index.esm.774e7b25.js";import"./use-route.2456c025.js";const Y={class:"pt-5"},Z={key:0},ee={class:"flex justify-center"},te={class:"w-90vw mb-3 bg-gray-100 rounded-lg"},ue={class:"text-xl w-40 overflow-hidden text-ellipsis whitespace-nowrap"},oe={class:"w-44 overflow-hidden text-ellipsis whitespace-nowrap"},se={class:"text-sm"},ae=y(" \u5546\u54C1\u603B\u4EF7\uFF1A"),ne={class:"text-red-600"},le={key:0},ie=y(" \u9700\u4ED8\u6B3E\uFF1A"),re={class:"text-red-600"},de={key:1},ce={key:2},me=y(" \u8BA2\u5355\u7F16\u53F7\uFF1A"),pe={class:"text-gray-600"},ve=y(" \u521B\u5EFA\u65F6\u95F4\uFF1A"),_e={class:"text-gray-600"},Fe={key:0},ye={class:"h-70vh bg-gray-50 py-5"},fe={class:"flex justify-center pb-20 pt-40"},De={class:"w-80vw"},ge=y("\u786E\u5B9A"),Be={key:1},he={class:"h-70vh bg-gray-50 py-5"},we={class:"h-70vh bg-gray-50 py-5"},Ee=y(" \u8BF7\u76F4\u63A5\u70B9\u51FB\u786E\u5B9A\u3002 "),Ae={class:"flex justify-center pb-20 pt-40"},ke={class:"w-80vw"},xe=y("\u786E\u5B9A"),We=K({setup(Ce){let a=v(),V=v(),r=v({commodity:"",createdAt:"",goodsNum:0,money:"",remarks:"",state:"",updatedAt:"",user:"",userInfo:"",express:""}),h=v({commodityIntroduce:"",commodityName:"",createdAt:"",image:[{url:""}],parameter:"",price:0,shop:"",title:"",updatedAt:""}),f=v({address:"",city:"",county:"",name:"",postalCode:"",province:"",tel:""}),F=v(!1),T=!1;const P=()=>{T?(w.success("\u652F\u4ED8\u6210\u529F~"),E.push("/my/pending"),E.go(-1)):w.fail("\u652F\u4ED8\u5931\u8D25~")},E=M();a.value=W().query,console.log(a.value);const R=()=>{E.go(-1)},S=async()=>{const i=await C.get(`orders/${a.value.id}`);r.value=i,a.value.state=i.state;const e=await C.get(`commoditys/${a.value.good}`);if(h.value=e,a.value.state!=="\u672A\u652F\u4ED8"){const k=await C.get(`user-info/${a.value.userInfo}`);f.value=k,console.log(k)}};let m=v(!1),c=v(""),$=v("");const q=i=>{m.value=!0,c.value=i.remarks,$.value=i.key},U=()=>{c.value="",$.value=""},G=()=>{r.value[$.value].remarks=c.value,m.value=!1,U()},L=()=>{w.loading({message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0}),setTimeout(async()=>{await C.put(`/orders/${a.value.id}`,{state:"\u5F85\u53D1\u8D27"}),w.success("\u652F\u4ED8\u6210\u529F~"),T=!0,F.value=!1},2e3)},H=i=>{E.push(`/goods/${i._id}`)},A=i=>{let e=v("\u5DF2\u6536\u8D27");i==="\u53D6\u6D88\u8BA2\u5355"?e.value="\u53D6\u6D88\u8BA2\u5355":i==="\u53D6\u6D88\u7533\u8BF7"?e.value="\u5DF2\u6536\u8D27":i==="\u7533\u8BF7\u9000\u8D27"?e.value="\u9000\u8D27\u7533\u8BF7":i==="\u786E\u8BA4\u6536\u8D27"&&(e.value="\u5DF2\u6536\u8D27"),Q.confirm({title:"",message:`\u662F\u5426\u786E\u8BA4${i}\uFF1F`}).then(async()=>{await C.put(`orders/${a.value.id}`,{state:e.value})?(w.loading("\u5DF2\u786E\u8BA4~"),E.go(0)):w.success("\u53D6\u6D88\u5931\u8D25~")}).catch(()=>{})};return X(()=>{S()}),(i,e)=>{const k=D("van-card"),N=D("van-field"),p=D("van-action-bar-button"),x=D("van-action-bar"),z=D("van-cell-group"),j=D("van-button"),I=D("van-action-sheet");return d(),g("div",null,[o("div",null,[o("button",{onClick:R,class:"flex items-center pl-3 pt-2"},[s(J,{type:"left",theme:"outline",size:"24",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),y(" "+l(t(a).state),1)])]),o("div",Y,[t(a).state==="\u672A\u652F\u4ED8"?(d(),g("div",Z,[s(O,{onSelectInfo:e[0]||(e[0]=u=>{B(V)?V.value=u:V=u})})])):_("",!0),o("div",ee,[o("div",te,[s(k,{num:t(r).goodsNum,thumb:t(h).image[0].url,tag:t(r).state,price:t(h).price,class:"rounded-t-lg",onClick:e[1]||(e[1]=u=>H(t(h)))},{title:n(()=>[o("div",ue,l(t(h).commodityName),1)]),desc:n(()=>[o("div",oe,l(t(h).commodityIntroduce),1)]),footer:n(()=>[o("div",null,"\u5408\u8BA1\uFFE5"+l(t(r).money),1)]),_:1},8,["num","thumb","tag","price"]),s(N,{modelValue:t(r).remarks,"onUpdate:modelValue":e[2]||(e[2]=u=>t(r).remarks=u),label:"\u8BA2\u5355\u5907\u6CE8\uFF1A",readonly:"",placeholder:"\u65E0\u5907\u6CE8","right-icon":"arrow",onClick:e[3]||(e[3]=u=>q(t(r))),class:"mb-1"},null,8,["modelValue"]),o("div",se,[o("div",null,[ae,o("span",ne,"\uFFE5"+l(t(r).money),1)]),t(a).state==="\u672A\u652F\u4ED8"?(d(),g("div",le,[ie,o("span",re,"\uFFE5"+l(t(r).money),1)])):_("",!0),t(a).state!=="\u672A\u652F\u4ED8"?(d(),g("div",de," \u6536\u8D27\u4FE1\u606F\uFF1A "+l(t(f).name)+", "+l(t(f).tel)+", "+l(t(f).province)+"/ "+l(t(f).city)+"/ "+l(t(f).county)+"/ "+l(t(f).address),1)):_("",!0),t(a).state==="\u5F85\u6536\u8D27"?(d(),g("div",ce," \u5FEB\u9012\u53F7\uFF1A"+l(t(r).express),1)):_("",!0),o("div",null,[me,o("span",pe,l(t(r)._id),1)]),o("div",null,[ve,o("span",_e,l(t(r).createdAt),1)])])])])]),o("div",null,[t(a).state==="\u672A\u652F\u4ED8"?(d(),b(x,{key:0},{default:n(()=>[s(p,{type:"danger",round:"",text:"\u53D6\u6D88\u8BA2\u5355",onClick:e[4]||(e[4]=u=>A("\u53D6\u6D88\u8BA2\u5355"))}),s(p,{type:"warning",round:"",text:"\u7EE7\u7EED\u4ED8\u6B3E",onClick:e[5]||(e[5]=()=>{B(F)?F.value=!0:F=!0})})]),_:1})):_("",!0),t(a).state==="\u5F85\u53D1\u8D27"?(d(),b(x,{key:1},{default:n(()=>[s(p,{type:"danger",round:"",text:"\u8054\u7CFB\u5356\u5BB6"}),s(p,{type:"warning",round:"",text:"\u7533\u8BF7\u9000\u8D27",onClick:e[6]||(e[6]=u=>A("\u7533\u8BF7\u9000\u8D27"))})]),_:1})):_("",!0),t(a).state==="\u5F85\u6536\u8D27"?(d(),b(x,{key:2},{default:n(()=>[s(p,{type:"danger",round:"",text:"\u8054\u7CFB\u5356\u5BB6"}),s(p,{type:"warning",round:"",text:"\u786E\u8BA4\u6536\u8D27",onClick:e[7]||(e[7]=u=>A("\u786E\u8BA4\u6536\u8D27"))})]),_:1})):_("",!0),t(a).state==="\u5DF2\u6536\u8D27"?(d(),b(x,{key:3},{default:n(()=>[s(p,{type:"danger",round:"",text:"\u8054\u7CFB\u5356\u5BB6"}),s(p,{type:"warning",round:"",text:"\u7533\u8BF7\u9000\u8D27",onClick:e[8]||(e[8]=u=>A("\u7533\u8BF7\u9000\u8D27"))})]),_:1})):_("",!0),t(a).state==="\u9000\u8D27\u7533\u8BF7"?(d(),b(x,{key:4},{default:n(()=>[s(p,{type:"danger",round:"",text:"\u8054\u7CFB\u5356\u5BB6"}),s(p,{type:"warning",round:"",text:"\u53D6\u6D88\u7533\u8BF7",onClick:e[9]||(e[9]=u=>A("\u53D6\u6D88\u7533\u8BF7"))})]),_:1})):_("",!0)]),t(a).state==="\u672A\u652F\u4ED8"?(d(),g("div",Fe,[s(I,{show:t(m),"onUpdate:show":e[11]||(e[11]=u=>B(m)?m.value=u:m=u),title:"\u8BA2\u5355\u5907\u6CE8",onClose:U},{default:n(()=>[o("div",ye,[s(z,{inset:""},{default:n(()=>[s(N,{modelValue:t(c),"onUpdate:modelValue":e[10]||(e[10]=u=>B(c)?c.value=u:c=u),rows:"5",autosize:"",type:"textarea",maxlength:"200",placeholder:"\u8BF7\u8F93\u5165\u7559\u8A00","show-word-limit":""},null,8,["modelValue"])]),_:1}),o("div",fe,[o("div",De,[s(j,{plain:"",type:"primary",size:"large",onClick:G},{default:n(()=>[ge]),_:1})])])])]),_:1},8,["show"])])):(d(),g("div",Be,[s(I,{show:t(m),"onUpdate:show":e[13]||(e[13]=u=>B(m)?m.value=u:m=u),title:"\u8BA2\u5355\u5907\u6CE8"},{default:n(()=>[o("div",he,[s(z,{inset:""},{default:n(()=>[s(N,{modelValue:t(c),"onUpdate:modelValue":e[12]||(e[12]=u=>B(c)?c.value=u:c=u),rows:"5",autosize:"",type:"textarea",maxlength:"200","show-word-limit":"",readonly:""},null,8,["modelValue"])]),_:1})])]),_:1},8,["show"])])),o("div",null,[s(I,{show:t(F),"onUpdate:show":e[14]||(e[14]=u=>B(F)?F.value=u:F=u),title:"\u652F\u4ED8",onClose:P},{default:n(()=>[o("div",we,[Ee,o("div",Ae,[o("div",ke,[s(j,{plain:"",type:"primary",size:"large",onClick:L},{default:n(()=>[xe]),_:1})])])])]),_:1},8,["show"])])])}}});export{We as default};
