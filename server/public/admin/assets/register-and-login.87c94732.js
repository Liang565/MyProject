import{a as d}from"./admin-store.5d141a94.js";import{u as v,p as t,m as a,q as w}from"./vendor.70f74869.js";import{h as u}from"./http.c8672c53.js";const U=()=>{const l=v();let r=t(!1),s=t({username:"",password:"",pass:""});const n=()=>{console.log("\u6267\u884Cregister"),r.value=!0},m=async()=>{let e=t({username:s.value.username,password:s.value.password,role:"user",state:!0});await u.post("auth/register",e.value),a.success("\u6CE8\u518C\u6210\u529F"),o.value.username=s.value.username,r.value=!1},c=()=>{console.log("RegisterOk"),s.value.password==""||s.value.username==""?a.error("\u8D26\u53F7\u6216\u8005\u5BC6\u7801\u4E3A\u7A7A"):m()};let o=t({username:"",password:""});const g=async()=>{console.log("\u6267\u884CloginUser");const e=await u.post("auth/login",o.value);a.success("\u767B\u9646\u6210\u529F"),localStorage.setItem("token",e.token),l.push("/home")},i=()=>{console.log("\u6267\u884ClogOut"),a.success("\u9000\u51FA"),localStorage.removeItem("token"),localStorage.removeItem("userid"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("promiss"),l.push("/login")},p=w(()=>!(o.value.username&&o.value.password));return{RegisterUser:n,regModel:s,LoginUser:g,logModel:o,registerVisibel:r,LogOut:i,RegisterSub:c,disabled:p,getUser:async()=>{const e=await u.get("auth/user");d.setAdmin(e),localStorage.setItem("userid",e._id),localStorage.setItem("role",e.role),localStorage.setItem("username",e.username)},httpURL:"http://www.lianger.fit/admin/api/"}};export{U as R};
