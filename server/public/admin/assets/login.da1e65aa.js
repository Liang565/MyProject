import{h as f}from"./http.2cf225b3.js";import{d as x,u as q,r as d,b as S,c as E,e as a,f as t,w as n,H as m}from"./user.0f0244cd.js";import{_ as B}from"./iconPark.1cfb687a.js";import{q as c,V as o,a as A}from"./reactivity.esm-bundler.f180a2dc.js";import{T as w}from"./function-call.b3f16382.js";import"./vendor.1e3ef9c3.js";import"./http.3d895303.js";import"./api.e2fff66e.js";import"./admin-store.fe4adc91.js";import"./crud-api.b919ecb7.js";import"./index.016760bd.js";const R={id:"building"},U={class:"flex justify-center items-center text-4xl pb-10"},I=m(" \u767B\u5F55 "),j={class:"pb-24"},L={style:{margin:"16px"}},T=m(" \u63D0\u4EA4 "),z={class:"flex items-center justify-end pr-5"},M=m(" \u65E0\u8D26\u53F7\uFF1F "),N=m("\u70B9\u51FB\u6CE8\u518C"),W={class:"h-50vh"},H={style:{margin:"16px"}},G=m(" \u63D0\u4EA4 "),se=x({setup(J){const C=q();let r=c({username:"",password:""});const y=async()=>{const u=await f.post("auth/login",r.value);u&&(w.success("\u767B\u9646\u6210\u529F"),localStorage.setItem("token",u.token),setTimeout(()=>{C.push("/")},1e3)),b()},b=async()=>{const u=await f.get("auth/user");localStorage.setItem("userid",u._id),localStorage.setItem("username",u.username),localStorage.setItem("image",u.image),localStorage.setItem("role",u.role)};let i=c(!1),l=c({username:"",password:""});const F=()=>{i.value=!0},V=async()=>{let u=c({username:l.value.username,password:l.value.password,role:"user",state:!0});const e=await f.post("auth/register",u.value);e?(w.success("\u6CE8\u518C\u6210\u529F~"),i.value=!1,r.value.username=e.username):v()},v=()=>{l.value={username:"",password:""}};return(u,e)=>{const p=d("van-field"),g=d("van-cell-group"),_=d("van-button"),h=d("van-form"),k=d("van-notice-bar"),D=d("van-action-sheet");return S(),E("div",R,[a("div",U,[t(B,{type:"smiling-face-with-squinting-eyes",theme:"outline",size:"44",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),I,t(B,{type:"smiling-face-with-squinting-eyes",theme:"outline",size:"44",spin:!1,fill:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]),a("div",j,[t(h,{onSubmit:y},{default:n(()=>[t(g,{inset:""},{default:n(()=>[t(p,{modelValue:o(r).username,"onUpdate:modelValue":e[0]||(e[0]=s=>o(r).username=s),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),t(p,{modelValue:o(r).password,"onUpdate:modelValue":e[1]||(e[1]=s=>o(r).password=s),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1}),a("div",L,[t(_,{round:"",block:"",type:"primary","native-type":"submit",onClick:e[2]||(e[2]=()=>{})},{default:n(()=>[T]),_:1})])]),_:1}),a("div",z,[M,t(_,{color:"#000000",size:"mini",square:"",hairline:"",onClick:F},{default:n(()=>[N]),_:1})])]),a("div",null,[t(k,{scrollable:"","left-icon":"volume-o",text:"\u63D0\u793A\uFF1A\u7528\u6237\u540D\uFF1Auser,\u5BC6\u7801\uFF1Auser "})]),a("div",null,[t(D,{show:o(i),"onUpdate:show":e[5]||(e[5]=s=>A(i)?i.value=s:i=s),"cancel-text":"\u53D6\u6D88",title:"\u6CE8\u518C","close-on-click-action":"",onClose:v},{default:n(()=>[a("div",W,[t(h,{onSubmit:V},{default:n(()=>[t(g,{inset:""},{default:n(()=>[t(p,{modelValue:o(l).username,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).username=s),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},null,8,["modelValue"]),t(p,{modelValue:o(l).password,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).password=s),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"])]),_:1}),a("div",H,[t(_,{round:"",block:"",type:"primary","native-type":"submit"},{default:n(()=>[G]),_:1})])]),_:1})])]),_:1},8,["show"])])])}}});export{se as default};
